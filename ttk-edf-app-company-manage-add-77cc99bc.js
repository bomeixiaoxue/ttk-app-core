webpackJsonp([46,58],{"407":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function config(options){options&&(0,_extends3["default"])(_options,options)}Object.defineProperty(exports,"__esModule",{"value":!0});var _extends2=__webpack_require__(2),_extends3=_interopRequireDefault(_extends2),_webapi=__webpack_require__(1660),_webapi2=_interopRequireDefault(_webapi),_options={"webapi":_webapi2["default"]};config.current=_options,exports["default"]=config,module.exports=exports["default"]},"688":function(module,exports,__webpack_require__){"use strict";function getMeta(){return{"name":"root","component":"Layout","className":"app-company-manage-add","style":{"background":"#fff"},"children":[{"name":"method","component":"div","className":"app-company-manage-add-method","_visible":"{{!data.showAdd}}","children":{"name":"content","component":"div","className":"app-company-manage-add-method-content","children":[{"name":"import","component":"div","className":"app-company-manage-add-method-import","onClick":"{{$importCompany}}","children":[{"name":"import","component":"div","children":[{"name":"icon","component":"Icon","fontFamily":"edficon","className":"importIcon","type":"daoru"},{"name":"span","component":"span","children":"\u5bfc\u5165\u4f01\u4e1a","style":{"color":"#47ACE1"}}]},{"name":"explain","component":"div","children":"\u5c06\u5176\u4ed6\u8d22\u52a1\u8f6f\u4ef6\u7684\u6570\u636e\u5bfc\u5165\u672c\u7cfb\u7edf\uff0c\u5bfc\u5165\u8fc7\u7a0b\u5c31\u521b\u5efa\u4e86\u4f01\u4e1a\u3002"}]},{"name":"directCreate","component":"div","className":"app-company-manage-add-method-direct","onClick":"{{$toAddCompany}}","children":[{"name":"direct","component":"div","children":[{"name":"icon","component":"Icon","fontFamily":"edficon","style":{"marginRight":"-4px","color":"#EA9518"},"type":"chuangjianqiye"},{"name":"span","component":"span","style":{"color":"#EA9518"},"children":"\u521b\u5efa\u4f01\u4e1a"}]},{"name":"explain","component":"div","children":"\u624b\u5de5\u65b0\u589e\u4f01\u4e1a\uff0c\u5e76\u5f55\u5165\u521d\u59cb\u5316\u6570\u636e\u3002\u9002\u5408\u4e4b\u524d\u624b\u5de5\u5e10\u6216\u4e0d\u9700\u8981\u628a\u4ee5\u524d\u7684\u51ed\u8bc1\u5bfc\u8fdb\u6765\u7684\u4f01\u4e1a"}]}]}},{"name":"directAdd","component":"div","_visible":"{{data.showAdd}}","children":[{"name":"btnGroup","component":"div","className":"app-company-manage-add-header","style":{"padding":"0px 100px"},"children":[{"name":"del","component":"Layout","children":"\u521b\u5efa\u4f01\u4e1a","className":"app-company-manage-add-header-title"}]},{"name":"content","component":"div","className":"app-company-manage-add-content","style":{"padding":"0px 200px"},"children":[{"name":"item1","component":"div","className":"app-company-manage-add-content-item1","children":[{"name":"div","component":"div","style":{"width":"400px","display":"flex","alignItems":"flex-start","flexDirection":"column"},"children":[{"name":"nameItem1","component":"Form.Item","label":"\u4f01\u4e1a\u540d\u79f0","required":!0,"style":{"display":"flex"},"validateStatus":"{{data.other.error.name?'error':'success'}}","help":"{{data.other.error.name}}","children":[{"name":"name","component":"Input","placeholder":"\u8bf7\u8f93\u5165\u8425\u4e1a\u6267\u7167\u7684\u4f01\u4e1a\u540d\u79f0","style":{"width":"290px","height":"32px"},"onBlur":"{{function(e){$fieldChange('data.form.name', e.target.value, 'create')}}}","value":"{{data.form.name}}","onChange":"{{function(e){$fieldChange('data.form.name', e.target.value)}}}"}]},{"name":"vatTaxpayerItem","component":"Form.Item","label":"\u7eb3\u7a0e\u4eba\u8eab\u4efd","required":!0,"style":{"display":"flex"},"validateStatus":"{{data.other.error.vatTaxpayer?'error':'success'}}","help":"{{data.other.error.vatTaxpayer}}","children":[{"name":"vatTaxpayer","component":"Select","showSearch":!1,"style":{"width":"290px","height":"30px"},"value":"{{data.form.vatTaxpayer}}","placeholder":"\u7eb3\u7a0e\u4eba\u8eab\u4efd","onSelect":"{{function(v){$setField('data.form.vatTaxpayer', v)}}}","children":{"name":"option","component":"Select.Option","value":"{{data.vatTaxpayer[_rowIndex].id}}","children":"{{data.vatTaxpayer[_rowIndex].name}}","_power":"for in data.vatTaxpayer"}}]},{"name":"enabledDateItem","component":"Form.Item","label":"\u542f\u7528\u671f\u95f4","required":!0,"_visible":"{{data.other.editDate}}","style":{"display":"flex"},"children":[{"name":"item","component":"div","children":[{"name":"item2","component":"span","children":"{{data.form.enabledDate}}"},{"name":"item3","className":"editBtn","component":"Icon","fontFamily":"edficon","type":"bianji","onClick":"{{$changeDateState}}"}]}]},{"name":"enabledDateItem","component":"Form.Item","_visible":"{{!data.other.editDate}}","label":"\u542f\u7528\u671f\u95f4","required":!0,"style":{"display":"flex"},"validateStatus":"{{data.other.error.enableDate?'error':'success'}}","help":"{{data.other.error.enableDate}}","children":[{"name":"enabledDate","component":"DatePicker.MonthPicker","style":{"width":"290px","height":"30px"},"defaultValue":"{{$stringToMoment((data.form.enabledDate),'YYYY-MM')}}","placeholder":"\u542f\u7528\u671f\u95f4","onChange":"{{function(v){$sf('data.form.enabledDate', $momentToString(v,'YYYY-MM'))}}}"}]},{"name":"Standard","component":"Form.Item","label":"\u4f1a\u8ba1\u51c6\u5219","required":!0,"_visible":"{{data.other.editStandard}}","style":{"display":"flex"},"children":[{"name":"item1","component":"span","children":"{{data.form.accountingStandardsName}}"},{"name":"item3","className":"editBtn","component":"Icon","fontFamily":"edficon","type":"bianji","onClick":"{{$changeStandardState}}"}]},{"name":"accountingStandardsItem","component":"Form.Item","_visible":"{{!data.other.editStandard}}","label":"\u4f01\u4e1a\u4f1a\u8ba1\u51c6\u5219","required":!0,"style":{"display":"flex","margin":"0 auto 0"},"validateStatus":"{{data.other.error.accountingStandards?'error':'success'}}","help":"{{data.other.error.accountingStandards}}","children":[{"name":"accountingStandards","component":"Select","showSearch":!1,"style":{"width":"290px","height":"30px"},"value":"{{data.form.accountingStandards}}","placeholder":"\u4f01\u4e1a\u4f1a\u8ba1\u51c6\u5219","onChange":"{{function(v,o){$setField('data.form.accountingStandards', v)}}}","children":{"name":"option","component":"Select.Option","value":"{{data.accountingStandards[_rowIndex].id}}","children":"{{data.accountingStandards[_rowIndex].name}}","_power":"for in data.accountingStandards"}}]}]}]}]},{"name":"btn","component":"div","className":"app-company-manage-add-btn","children":[{"name":"add","component":"Button","children":"\u53d6\u6d88","onClick":"{{$cancel}}","className":"app-company-manage-add-btn-cancel"},{"name":"cancel","component":"Button","children":"\u521b\u5efa","onClick":"{{$create}}","className":"app-company-manage-add-btn-create"}]}]}]}}function getInitState(){return{"data":{"form":{"name":"","enabledDate":"","vatTaxpayer":"","accountingStandards":"","accountingStandardsName":""},"other":{"propertyList":[],"error":{},"editDate":!0,"editStandard":!0},"manageList":[],"showAdd":!1}}}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.getMeta=getMeta,exports.getInitState=getInitState;__webpack_require__(166)},"1657":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function creator(option){var metaAction=new _edfMetaEngine.action(option),voucherAction=_edfComponent.FormDecorator.actionCreator((0,_extends3["default"])({},option,{"metaAction":metaAction})),o=new action((0,_extends3["default"])({},option,{"metaAction":metaAction,"voucherAction":voucherAction})),ret=(0,_extends3["default"])({},metaAction,voucherAction,o);return metaAction.config({"metaHandlers":ret}),ret}Object.defineProperty(exports,"__esModule",{"value":!0});var _class,_temp,_initialiseProps,_getIterator2=__webpack_require__(28),_getIterator3=_interopRequireDefault(_getIterator2),_extends2=__webpack_require__(2),_extends3=_interopRequireDefault(_extends2),_regenerator=__webpack_require__(20),_regenerator2=_interopRequireDefault(_regenerator),_asyncToGenerator2=__webpack_require__(19),_asyncToGenerator3=_interopRequireDefault(_asyncToGenerator2),_classCallCheck2=__webpack_require__(3),_classCallCheck3=_interopRequireDefault(_classCallCheck2);exports["default"]=creator;var _react=__webpack_require__(1),_edfMetaEngine=(_interopRequireDefault(_react),__webpack_require__(5)),_moment=(__webpack_require__(11),__webpack_require__(14)),_config=(_interopRequireDefault(_moment),__webpack_require__(407)),_config2=_interopRequireDefault(_config),_edfConsts=__webpack_require__(166),_fetch=__webpack_require__(461),_fetch2=_interopRequireDefault(_fetch),_edfComponent=__webpack_require__(24),action=(_temp=_class=function action(option){(0,_classCallCheck3["default"])(this,action),_initialiseProps.call(this),this.metaAction=option.metaAction,this.voucherAction=option.voucherAction,this.config=_config2["default"].current,this.webapi=this.config.webapi},_initialiseProps=function _initialiseProps(){var _this=this;this.onInit=function(_ref){var component=_ref.component,injections=_ref.injections;_this.voucherAction.onInit({"component":component,"injections":injections}),_this.component=component,_this.injections=injections,_this.component.props.setOkListener&&_this.component.props.setOkListener(_this.onOk),injections.reduce("init",{"isPop":_this.component.props.isPop}),_this.loadSelect();var availableOrg=sessionStorage.getItem("currentOrgStatus");1!=availableOrg&&2!=availableOrg&&_this.load()},this.load=function(){var _ref2=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee(option){var payload,list,response;return _regenerator2["default"].wrap(function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,_this.GetPropertyList();case 2:return payload=_context.sent,_context.next=5,_this.getData();case 5:return list=_context.sent,_context.next=8,_this.webapi.portal.init();case 8:return _context.next=10,_this.webapi.portal.portal();case 10:response=_context.sent,response.list=list,response.payload=payload,option&&(response.org=option),response.user?_this.metaAction.context.set("currentUser",response.user):(_this.metaAction.context.set("currentUser",void 0),_this.component.props.onRedirect&&_this.config.goAfterLogout&&_this.component.props.onRedirect(_this.config.goAfterLogout)),response.org?_this.metaAction.context.set("currentOrg",response.org):(_this.metaAction.context.set("currentOrg",void 0),_this.component.props.onRedirect&&_this.config.goAfterLogout&&_this.component.props.onRedirect(_this.config.goAfterLogout)),_this.injections.reduce("load",response),_this.metaAction.sf("data.isShowSearch",!1),_fetch2["default"].setAccessToken(sessionStorage.getItem("_accessToken")),localStorage.setItem("token",sessionStorage.getItem("_accessToken"));case 20:case"end":return _context.stop()}},_callee,_this)}));return function(_x){return _ref2.apply(this,arguments)}}(),this.loadSelect=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee2(){var arr,enumList,date;return _regenerator2["default"].wrap(function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return arr=[],arr.push(_edfConsts.consts["enum"].VATTAXPAYER),arr.push(_edfConsts.consts["enum"].ACCOUNTINGSTANDARDS),_context2.next=5,_this.webapi.enumDetail.batchQuery(arr);case 5:return enumList=_context2.sent,_context2.next=8,_this.webapi.enableDate.getServerDate();case 8:date=_context2.sent,_this.injections.reduce("loadSelect",enumList[_edfConsts.consts["enum"].VATTAXPAYER],enumList[_edfConsts.consts["enum"].ACCOUNTINGSTANDARDS],date);case 10:case"end":return _context2.stop()}},_callee2,_this)})),this.getData=function(){var _ref4=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee3(pageInfo){var response;return _regenerator2["default"].wrap(function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,_this.webapi.org.queryList();case 2:return response=_context3.sent,_context3.abrupt("return",response);case 4:case"end":return _context3.stop()}},_callee3,_this)}));return function(_x2){return _ref4.apply(this,arguments)}}(),this.GetPropertyList=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee4(){return _regenerator2["default"].wrap(function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.abrupt("return",{"list":[{"enumId":_edfConsts.consts.VATTAXPAYER_generalTaxPayer,"name":"\u4e00\u822c\u7eb3\u7a0e\u4eba"},{"enumId":_edfConsts.consts.VATTAXPAYER_smallScaleTaxPayer,"name":"\u5c0f\u89c4\u6a21\u7eb3\u7a0e\u4eba"}]});case 1:case"end":return _context4.stop()}},_callee4,_this)})),this.create=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee5(){var form,user,ok,params,response,org;return _regenerator2["default"].wrap(function _callee5$(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return form=_this.metaAction.gf("data.form").toJS(),user=_this.metaAction.context.get("currentUser")||{},form=(0,_extends3["default"])(form,{"creator":user.id}),_context5.next=5,_this.check([{"path":"data.form.name","value":form.name},{"path":"data.form.vatTaxpayer","value":form.vatTaxpayer},{"path":"data.form.enabledDate","value":form.enabledDate},{"path":"data.form.accountingStandards","value":form.accountingStandards}],"create");case 5:if(ok=_context5.sent){_context5.next=8;break}return _context5.abrupt("return",!1);case 8:return params={"creator":form.creator,"name":form.name,"vatTaxpayer":form.vatTaxpayer,"enabledYear":form.enabledDate.split("-")[0],"enabledMonth":form.enabledDate.split("-")[1],"accountingStandards":form.accountingStandards,"industry":2000030001},_edfComponent.LoadingMask.show({"background":"rgba(230,247,255,0.5)"}),_context5.next=12,_this.webapi.org.create(params);case 12:return response=_context5.sent,_context5.next=15,_this.webapi.org.updateCurrentOrg({"orgId":response.id});case 15:if(org=_context5.sent,!response||!org){_context5.next=25;break}if(_context5.t0=_this.component.props.onPortalReload,!_context5.t0){_context5.next=21;break}return _context5.next=21,_this.component.props.onPortalReload();case 21:_this.metaAction.toast("success","\u521b\u5efa\u6210\u529f"),_edfComponent.LoadingMask.hide(),sessionStorage["currentOrgStatus"]=null,_this.component.props.setPortalContent("\u95e8\u6237\u9996\u9875","ttk-edf-app-portal",{"isShowMenu":!1,"isTabsStyle":!1});case 25:case"end":return _context5.stop()}},_callee5,_this)})),this.cancel=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee6(){return _regenerator2["default"].wrap(function _callee6$(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:_this.component.props.setPortalContent("\u4f01\u4e1a\u7ba1\u7406","ttk-edf-app-company-manage");case 1:case"end":return _context6.stop()}},_callee6,_this)})),this.goRegister=function(e){e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),_this.component.props.onRedirect({"appName":"ttk-edf-app-company-manage-add"})},this.goCompanyManage=function(e){e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),_this.component.props.onRedirect({"appName":"ttk-edf-app-company-manage"})},this.searchVisibleToogle=function(){_this.metaAction.sf("data.isShowSearch",!_this.metaAction.gf("data.isShowSearch"))},this.getSearchVisible=function(){return _this.metaAction.gf("data.isShowSearch")},this.fieldChange=function(){var _ref8=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee7(fieldPath,value,operate){return _regenerator2["default"].wrap(function _callee7$(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:return _context7.next=2,_this.check([{"path":fieldPath,"value":value}],operate);case 2:case"end":return _context7.stop()}},_callee7,_this)}));return function(_x3,_x4,_x5){return _ref8.apply(this,arguments)}}(),this.check=function(){var _ref9=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee8(fieldPathAndValues,operate){var checkResults,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,o,r,json,hasError;return _regenerator2["default"].wrap(function _callee8$(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:if(fieldPathAndValues){_context8.next=2;break}return _context8.abrupt("return");case 2:checkResults=[],_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0,_context8.prev=6,_iterator=(0,_getIterator3["default"])(fieldPathAndValues);case 8:if(_iteratorNormalCompletion=(_step=_iterator.next()).done){_context8.next=49;break}if(o=_step.value,r=(0,_extends3["default"])({},o),"data.form.name"!=o.path){_context8.next=20;break}return _context8.t0=_extends3["default"],_context8.t1=r,_context8.next=16,_this.checkName(o.value,operate);case 16:_context8.t2=_context8.sent,(0,_context8.t0)(_context8.t1,_context8.t2),_context8.next=45;break;case 20:if("data.form.vatTaxpayer"!=o.path){_context8.next=29;break}return _context8.t3=_extends3["default"],_context8.t4=r,_context8.next=25,_this.checkVatTaxpayer(o.value);case 25:_context8.t5=_context8.sent,(0,_context8.t3)(_context8.t4,_context8.t5),_context8.next=45;break;case 29:if("data.form.enabledDate"!=o.path){_context8.next=38;break}return _context8.t6=_extends3["default"],_context8.t7=r,_context8.next=34,_this.checkEnableDate(o.value);case 34:_context8.t8=_context8.sent,(0,_context8.t6)(_context8.t7,_context8.t8),_context8.next=45;break;case 38:if("data.form.accountingStandards"!=o.path){_context8.next=45;break}return _context8.t9=_extends3["default"],_context8.t10=r,_context8.next=43,_this.checkAccountingStandards(o.value);case 43:_context8.t11=_context8.sent,(0,_context8.t9)(_context8.t10,_context8.t11);case 45:checkResults.push(r);case 46:_iteratorNormalCompletion=!0,_context8.next=8;break;case 49:_context8.next=55;break;case 51:_context8.prev=51,_context8.t12=_context8["catch"](6),_didIteratorError=!0,_iteratorError=_context8.t12;case 55:_context8.prev=55,_context8.prev=56,!_iteratorNormalCompletion&&_iterator["return"]&&_iterator["return"]();case 58:if(_context8.prev=58,!_didIteratorError){_context8.next=61;break}throw _iteratorError;case 61:return _context8.finish(58);case 62:return _context8.finish(55);case 63:return json={},hasError=!0,checkResults.forEach(function(o){json[o.path]=o.value,json[o.errorPath]=o.message,o.message&&(hasError=!1)}),_this.metaAction.sfs(json),_context8.abrupt("return",hasError);case 68:case"end":return _context8.stop()}},_callee8,_this,[[6,51,55,63],[56,,58,62]])}));return function(_x6,_x7){return _ref9.apply(this,arguments)}}(),this.checkName=function(){var _ref10=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee9(org,operate){var message;return _regenerator2["default"].wrap(function _callee9$(_context9){for(;;)switch(_context9.prev=_context9.next){case 0:if(!operate||"create"!=operate){_context9.next=5;break}return _context9.next=3,_this.webapi.org.existsSysOrg(org);case 3:if(!_context9.sent){_context9.next=5;break}return _context9.abrupt("return",{"errorPath":"data.other.error.name","message":"\u8be5\u4f01\u4e1a\u540d\u79f0\u5df2\u6ce8\u518c"});case 5:return org?org.length>200&&(message="\u4f01\u4e1a\u540d\u79f0\u4e0d\u80fd\u8d85\u8fc7200\u4e2a\u5b57"):message="\u8bf7\u8f93\u5165\u4f01\u4e1a\u540d\u79f0",_context9.abrupt("return",{"errorPath":"data.other.error.name","message":message});case 7:case"end":return _context9.stop()}},_callee9,_this)}));return function(_x8,_x9){return _ref10.apply(this,arguments)}}(),this.checkVatTaxpayer=function(){var _ref11=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee10(vatTaxpayer){var message;return _regenerator2["default"].wrap(function _callee10$(_context10){for(;;)switch(_context10.prev=_context10.next){case 0:return vatTaxpayer||(message="\u7eb3\u7a0e\u4eba\u8eab\u4efd\u4e0d\u80fd\u4e3a\u7a7a"),_context10.abrupt("return",{"errorPath":"data.other.error.vatTaxpayer","message":message});case 2:case"end":return _context10.stop()}},_callee10,_this)}));return function(_x10){return _ref11.apply(this,arguments)}}(),this.checkEnableDate=function(){var _ref12=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee11(enableDate){var message;return _regenerator2["default"].wrap(function _callee11$(_context11){for(;;)switch(_context11.prev=_context11.next){case 0:return enableDate||(message="\u542f\u7528\u65e5\u671f\u4e0d\u80fd\u4e3a\u7a7a"),_context11.abrupt("return",{"errorPath":"data.other.error.enableDate","message":message});case 2:case"end":return _context11.stop()}},_callee11,_this)}));return function(_x11){return _ref12.apply(this,arguments)}}(),this.checkAccountingStandards=function(){var _ref13=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee12(accountingStandards){var message;return _regenerator2["default"].wrap(function _callee12$(_context12){for(;;)switch(_context12.prev=_context12.next){case 0:return accountingStandards||(message="\u4f01\u4e1a\u4f1a\u8ba1\u51c6\u5219\u4e0d\u80fd\u4e3a\u7a7a"),_context12.abrupt("return",{"errorPath":"data.other.error.accountingStandards","message":message});case 2:case"end":return _context12.stop()}},_callee12,_this)}));return function(_x12){return _ref13.apply(this,arguments)}}(),this.topMenuClick=function(){var _ref14=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee13(e){var res;return _regenerator2["default"].wrap(function _callee13$(_context13){for(;;)switch(_context13.prev=_context13.next){case 0:_context13.t0=e.key,_context13.next="mySetting"===_context13.t0?3:"logout"===_context13.t0?5:11;break;case 3:return _this.setContent("\u4e2a\u4eba\u8bbe\u7f6e","edfx-app-my-setting"),_context13.abrupt("break",11);case 5:if(!_this.component.props.onRedirect||!_this.config.goAfterLogout){_context13.next=10;break}return _context13.next=8,_this.webapi.user.logout();case 8:res=_context13.sent,res&&(_this.metaAction.context.set("currentUser",void 0),_this.metaAction.context.set("currentOrg",void 0),sessionStorage.removeItem("mobile"),sessionStorage.removeItem("username"),sessionStorage.removeItem("_accessToken"),sessionStorage.removeItem("password"),_this.component.props.onRedirect(_this.config.goAfterLogout));case 10:return _context13.abrupt("break",11);case 11:case"end":return _context13.stop()}},_callee13,_this)}));return function(_x13){return _ref14.apply(this,arguments)}}(),this.setField=function(){var _ref15=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee14(path,value){return _regenerator2["default"].wrap(function _callee14$(_context14){for(;;)switch(_context14.prev=_context14.next){case 0:_this.voucherAction.fieldChange(path,value);case 1:case"end":return _context14.stop()}},_callee14,_this)}));return function(_x14,_x15){return _ref15.apply(this,arguments)}}(),this.checkOrg=function(){var _ref16=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee15(option){var res;return _regenerator2["default"].wrap(function _callee15$(_context15){for(;;)switch(_context15.prev=_context15.next){case 0:return _context15.next=2,_this.webapi.enumDetail.checkOrg({"name":option});case 2:res=_context15.sent;case 3:case"end":return _context15.stop()}},_callee15,_this)}));return function(_x16){return _ref16.apply(this,arguments)}}(),this.changeDateState=function(){var state=_this.metaAction.gf("data.other").toJS().editDate;_this.metaAction.sf("data.other.editDate",!state)},this.changeStandardState=function(){var state=_this.metaAction.gf("data.other").toJS().editStandard;_this.metaAction.sf("data.other.editStandard",!state)},this.toAddCompany=function(){_this.metaAction.sf("data.showAdd",!_this.metaAction.gf("data.showAdd"))},this.importCompany=function(){}},_temp);module.exports=exports["default"]},"1658":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{"value":!0}),exports["default"]=void 0;var _dec,_class,_extends2=__webpack_require__(2),_extends3=_interopRequireDefault(_extends2),_classCallCheck2=__webpack_require__(3),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_possibleConstructorReturn2=__webpack_require__(7),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=__webpack_require__(6),_inherits3=_interopRequireDefault(_inherits2),_react=__webpack_require__(1),_edfMetaEngine=(_interopRequireDefault(_react),__webpack_require__(5)),_index=__webpack_require__(689),_index2=_interopRequireDefault(_index),C=(_dec=(0,_edfMetaEngine.wrapper)(_index2["default"]),_dec(_class=function(_Component){function C(){return(0,_classCallCheck3["default"])(this,C),(0,_possibleConstructorReturn3["default"])(this,_Component.apply(this,arguments))}return(0,_inherits3["default"])(C,_Component),C.prototype.render=function render(){return this.props.monkeyKing((0,_extends3["default"])({},this.props,{"path":"root"}))},C}(_react.Component))||_class);exports["default"]=C,module.exports=exports["default"]},"1659":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function creator(option){var metaReducer=new _edfMetaEngine.reducer(option),o=new reducer((0,_extends3["default"])({},option,{"metaReducer":metaReducer}));return(0,_extends3["default"])({},metaReducer,o)}Object.defineProperty(exports,"__esModule",{"value":!0});var _extends2=__webpack_require__(2),_extends3=_interopRequireDefault(_extends2),_classCallCheck2=__webpack_require__(3),_classCallCheck3=_interopRequireDefault(_classCallCheck2);exports["default"]=creator;var _immutable=__webpack_require__(11),_edfMetaEngine=__webpack_require__(5),_config=__webpack_require__(407),_config2=_interopRequireDefault(_config),_data=__webpack_require__(688),_edfUtils=__webpack_require__(12),_edfConsts=__webpack_require__(166),_moment=__webpack_require__(14),reducer=(_interopRequireDefault(_moment),function reducer(option){var _this=this;(0,_classCallCheck3["default"])(this,reducer),this.init=function(state,option){var initState=(0,_data.getInitState)();return _this.metaReducer.init(state,initState)},this.load=function(state,res){if(res.list&&res.list.length){var propertyList=res.payload.list.map(function(o){return{"label":o.name,"value":o.enumId}});state=_this.metaReducer.sf(state,"data.form.vatTaxpayer",(0,_immutable.fromJS)(propertyList[0]&&Number(propertyList[0].value))),state=_this.metaReducer.sf(state,"data.other.vatTaxpayer",(0,_immutable.fromJS)(propertyList))}return state},this.loadSelect=function(state,vatTaxpayer,accountingStandards,date){state=_this.metaReducer.sf(state,"data.vatTaxpayer",(0,_immutable.fromJS)(vatTaxpayer)),state=_this.metaReducer.sf(state,"data.accountingStandards",(0,_immutable.fromJS)(accountingStandards));var accountingStandardsName="";accountingStandards.forEach(function(o){if(o.id==_edfConsts.consts.ACCOUNTINGSTANDARDS_2013)return void(accountingStandardsName=o.name)}),state=_this.metaReducer.sf(state,"data.form.accountingStandards",Number(_edfConsts.consts.ACCOUNTINGSTANDARDS_2013)),state=_this.metaReducer.sf(state,"data.form.accountingStandardsName",accountingStandardsName);var enabledDate=_edfUtils.moment.stringToMoment(date).format("YYYY-MM");return state=_this.metaReducer.sf(state,"data.form.vatTaxpayer",vatTaxpayer[0].id),state=_this.metaReducer.sf(state,"data.form.enabledDate",enabledDate)},this.metaReducer=option.metaReducer,this.config=_config2["default"].current});module.exports=exports["default"]},"1660":function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{"value":!0});var _edfUtils=__webpack_require__(12);exports["default"]={"portal":{"init":function init(){return _edfUtils.fetch.post("/v1/edf/portal/init")},"portal":function portal(){return _edfUtils.fetch.post("/v1/edf/portal/getPortalDto").then(function(r){return r.menu.forEach(function(m){return m.key=m.code}),r.menu=_edfUtils.tree.build(r.menu,{"id":0}).children,r})}},"user":{"logout":function logout(){return _edfUtils.fetch.post("/v1/edf/user/logout")}},"org":{"queryList":function queryList(option){return _edfUtils.fetch.post("v1/edf/org/queryList",option)},"existsSysOrg":function existsSysOrg(option){return _edfUtils.fetch.post("/v1/edf/sysOrg/existsSysOrg",option)},"create":function create(option){return _edfUtils.fetch.post("v1/edf/org/create",option)},"updateCurrentOrg":function updateCurrentOrg(option){return _edfUtils.fetch.post("/v1/edf/org/updateCurrentOrg",option)}},"enumDetail":{"batchQuery":function batchQuery(option){return _edfUtils.fetch.post("/v1/edf/enumDetail/batchQuery",option)},"updateCurrentOrg":function updateCurrentOrg(option){return _edfUtils.fetch.post("/v1/edf/org/updateCurrentOrg",option)},"checkOrg":function checkOrg(option){return _edfUtils.fetch.post("/v1/edf/sysOrg/existsSysOrg",option)}},"enableDate":{"getServerDate":function getServerDate(){return _edfUtils.fetch.post("/v1/edf/org/getSystemDate")}}},module.exports=exports["default"]}});