webpackJsonp([44,58],{"412":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function config(options){options&&(0,_extends3["default"])(_options,options)}Object.defineProperty(exports,"__esModule",{"value":!0});var _extends2=__webpack_require__(2),_extends3=_interopRequireDefault(_extends2),_webapi=__webpack_require__(1680),_webapi2=_interopRequireDefault(_webapi),_options={"webapi":_webapi2["default"]};config.current=_options,exports["default"]=config,module.exports=exports["default"]},"698":function(module,exports){"use strict";function getMeta(){return{"name":"root","component":"Layout","className":"ttk-edf-app-enum","children":[{"name":"left","component":"Card","className":"ttk-edf-app-enum-left","title":"\u679a\u4e3e\u5206\u7c7b","extra":{"name":"header","component":"div","children":[{"name":"add","component":"Button","type":"showy","shape":"circle","icon":"plus","onClick":"{{$addType}}"},{"name":"modify","component":"Button","type":"showy","shape":"circle","icon":"edit","onClick":"{{$modifyType}}"},{"name":"del","component":"Button","type":"showy","shape":"circle","icon":"close","onClick":"{{$delType}}"}]},"children":[{"name":"tree","component":"Tree","selectedKeys":"{{[data.other.filter.enumId+'']}}","onSelect":"{{$selectType}}","children":"{{$loopTreeChildren(data.tree)}}"}]},{"name":"content","component":"Card","className":"ttk-edf-app-enum-content","title":"\u679a\u4e3e\u9879","extra":{"name":"header","component":"div","className":"ttk-edf-app-enum-content-header","children":[{"name":"add","component":"Button","type":"softly","children":"\u65b0\u589e","onClick":"{{$addDetail}}"},{"name":"del","component":"Button","type":"softly","children":"\u5220\u9664","onClick":"{{$batchDelDetail}}"}]},"children":[{"name":"dataGrid","component":"DataGrid","headerHeight":35,"rowHeight":35,"enableSequence":!0,"startSequence":"{{(data.pagination.current-1)*data.pagination.pageSize + 1}}","rowsCount":"{{$getListRowsCount()}}","columns":"{{$getListColumns()}}"}]}]}}function getInitState(){return{"data":{"tree":[],"columns":[],"list":[],"pagination":{"currentPage":1,"totalPage":0,"totalData":0,"pageSize":20},"other":{"filter":{}}}}}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.getMeta=getMeta,exports.getInitState=getInitState},"1669":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function creator(option){var metaAction=new _edfMetaEngine.action(option),o=new action((0,_extends3["default"])({},option,{"metaAction":metaAction})),ret=(0,_extends3["default"])({},metaAction,o);return metaAction.config({"metaHandlers":ret}),ret}Object.defineProperty(exports,"__esModule",{"value":!0});var _extends2=__webpack_require__(2),_extends3=_interopRequireDefault(_extends2),_regenerator=__webpack_require__(20),_regenerator2=_interopRequireDefault(_regenerator),_asyncToGenerator2=__webpack_require__(19),_asyncToGenerator3=_interopRequireDefault(_asyncToGenerator2),_classCallCheck2=__webpack_require__(3),_classCallCheck3=_interopRequireDefault(_classCallCheck2);exports["default"]=creator;var _react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_edfMetaEngine=__webpack_require__(5),_config=(__webpack_require__(11),__webpack_require__(412)),_config2=_interopRequireDefault(_config),_moment=__webpack_require__(14),_edfComponent=(_interopRequireDefault(_moment),__webpack_require__(24)),action=function action(option){var _this=this;(0,_classCallCheck3["default"])(this,action),this.onInit=function(_ref){var component=_ref.component,injections=_ref.injections;_this.component=component,_this.injections=injections,injections.reduce("init");var pagination=_this.metaAction.gf("data.pagination").toJS();_this.load(pagination)},this.load=function(){var _ref2=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee(pagination,filter){var response,columns;return _regenerator2["default"].wrap(function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return void 0==filter&&(filter={"enumId":"3336424919598080"}),_context.next=3,_this.webapi.enumDetail.init({"pagination":pagination,"filter":filter});case 3:return response=_context.sent,_context.next=6,_this.webapi.columnDetail.findByColumnCode("enumList");case 6:columns=_context.sent,response.columns=columns,response.filter=filter,_this.injections.reduce("load",response);case 10:case"end":return _context.stop()}},_callee,_this)}));return function(_x,_x2){return _ref2.apply(this,arguments)}}(),this.reload=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee2(){var pagination,filter;return _regenerator2["default"].wrap(function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:pagination=_this.metaAction.gf("data.pagination").toJS(),filter=_this.metaAction.gf("data.other.filter").toJS(),_this.load(pagination,filter);case 2:case"end":return _context2.stop()}},_callee2,_this)})),this.selectType=function(){var _ref4=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee3(selectedKeys,info){var pagination,filter;return _regenerator2["default"].wrap(function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:pagination={"currentPage":1,"totalData":0,"pageSize":20},filter={"enumId":selectedKeys[0]},_this.load(pagination,filter);case 2:case"end":return _context3.stop()}},_callee3,_this)}));return function(_x3,_x4){return _ref4.apply(this,arguments)}}(),this.getListRowsCount=function(){return _this.metaAction.gf("data.list").size},this.getListColumns=function(){var enus=_this.metaAction.gf("data.list").toJS(),columns=_this.metaAction.gf("data.columns").toJS(),Column=_edfComponent.DataGrid.Column,Cell=_edfComponent.DataGrid.Cell,cols=[_react2["default"].createElement(Column,{"name":"select","columnKey":"select","flexGrow":1,"width":40,"header":_react2["default"].createElement(Cell,{"name":"cb"},_react2["default"].createElement(_edfComponent.Checkbox,{"checked":_this.isSelectAll(),"onChange":_this.selectAll()})),"cell":function cell(ps){return _react2["default"].createElement(Cell,{"name":"cell"},_react2["default"].createElement(_edfComponent.Checkbox,{"onChange":_this.selectRow(ps.rowIndex)}))}})];return columns.forEach(function(op){if(1==op.isVisible){var col=_react2["default"].createElement(Column,{"name":op.id,"columnKey":op.id,"flexGrow":1,"width":op.width,"header":_react2["default"].createElement(Cell,{"name":"header"},op.caption),"cell":function cell(ps){return"code"==op.fieldName?_react2["default"].createElement(Cell,null,_react2["default"].createElement("a",{"onClick":_this.modifyDetail(enus[ps.rowIndex].id)},enus[ps.rowIndex][op.fieldName])):_react2["default"].createElement(Cell,null,enus[ps.rowIndex][op.fieldName])}});cols.push(col)}}),cols},this.isSelectAll=function(){var lst=_this.metaAction.gf("data.list");return!(!lst||0==lst.size)&&lst.every(function(o){return o.get("selected")})},this.selectAll=function(){return function(e){_this.injections.reduce("selectAll",e.target.checked)}},this.selectRow=function(rowIndex){return function(e){_this.injections.reduce("selectRow",rowIndex,e.target.checked)}},this.pageChanged=function(current,pageSize){var filter=_this.metaAction.gf("data.other.filter").toJS();_this.load({"current":current,"pageSize":pageSize},filter)},this.loopTreeChildren=function(data){return data?data.map(function(item){return item.children&&item.children.length?_react2["default"].createElement(_edfComponent.Tree.TreeNode,{"key":item.id,"title":item.name},_this.loopTreeChildren(item.children)):_react2["default"].createElement(_edfComponent.Tree.TreeNode,{"key":item.id,"title":item.name})}):null},this.addType=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee4(){var type,ret;return _regenerator2["default"].wrap(function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return type=_this.metaAction.gf("data.other.filter.enumId"),_context4.next=3,_this.metaAction.modal("show",{"title":"\u65b0\u589e","children":_this.metaAction.loadApp("edfx-app-enum-type",{"store":_this.component.props.store,"parentId":type})});case 3:ret=_context4.sent,ret&&_this.reload();case 5:case"end":return _context4.stop()}},_callee4,_this)})),this.modifyType=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee5(){var type,ret;return _regenerator2["default"].wrap(function _callee5$(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:if(type=_this.metaAction.gf("data.other.filter.enumId")){_context5.next=4;break}return _this.metaAction.toast("error","\u8bf7\u9009\u4e2d\u4e00\u4e2a\u5206\u7c7b"),_context5.abrupt("return");case 4:return _context5.next=6,_this.metaAction.modal("show",{"title":"\u4fee\u6539","children":_this.metaAction.loadApp("edfx-app-enum-type",{"store":_this.component.props.store,"typeId":type})});case 6:ret=_context5.sent,ret&&_this.reload();case 8:case"end":return _context5.stop()}},_callee5,_this)})),this.delType=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee6(){var type,ret,id,response;return _regenerator2["default"].wrap(function _callee6$(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:if(type=_this.metaAction.gf("data.other.filter.enumId")){_context6.next=4;break}return _this.metaAction.toast("error","\u8bf7\u9009\u4e2d\u4e00\u4e2a\u679a\u4e3e\u5206\u7c7b"),_context6.abrupt("return");case 4:return _context6.next=6,_this.metaAction.modal("confirm",{"title":"\u5220\u9664","content":"\u786e\u8ba4\u5220\u9664?"});case 6:if(ret=_context6.sent,!ret){_context6.next=14;break}return id=_this.metaAction.gf("data.other.filter.enumId"),_context6.next=11,_this.webapi["enum"].del({"id":id});case 11:response=_context6.sent,_this.metaAction.toast("success","\u5220\u9664\u679a\u4e3e\u5206\u7c7b\u6210\u529f"),_this.reload();case 14:case"end":return _context6.stop()}},_callee6,_this)})),this.addDetail=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee7(){var type,ret,typeList;return _regenerator2["default"].wrap(function _callee7$(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:if(type=_this.metaAction.gf("data.other.filter.enumId")){_context7.next=4;break}return _this.metaAction.toast("error","\u8bf7\u9009\u4e2d\u4e00\u4e2a\u679a\u4e3e\u5206\u7c7b"),_context7.abrupt("return");case 4:return _context7.next=6,_this.metaAction.modal("show",{"title":"\u65b0\u589e","children":_this.metaAction.loadApp("edfx-app-enum-detail",{"store":_this.component.props.store,"typeId":type})});case 6:ret=_context7.sent,ret&&(typeList=[],typeList.push(type),_this.selectType(typeList));case 8:case"end":return _context7.stop()}},_callee7,_this)})),this.modifyDetail=function(id){return(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee8(){var type,ret,typeList;return _regenerator2["default"].wrap(function _callee8$(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:return type=_this.metaAction.gf("data.other.filter.enumId"),_context8.next=3,_this.metaAction.modal("show",{"title":"\u4fee\u6539","children":_this.metaAction.loadApp("edfx-app-enum-detail",{"store":_this.component.props.store,"id":id})});case 3:ret=_context8.sent,ret&&(typeList=[],typeList.push(type),_this.selectType(typeList));case 5:case"end":return _context8.stop()}},_callee8,_this)}))},this.batchDelDetail=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee9(){var type,lst,selectRows,ret,ids,typeList;return _regenerator2["default"].wrap(function _callee9$(_context9){for(;;)switch(_context9.prev=_context9.next){case 0:if(type=_this.metaAction.gf("data.other.filter.enumId")){_context9.next=4;break}return _this.metaAction.toast("error","\u8bf7\u9009\u4e2d\u4e00\u4e2a\u679a\u4e3e\u5206\u7c7b"),_context9.abrupt("return");case 4:if(lst=_this.metaAction.gf("data.list"),lst&&0!=lst.size){_context9.next=8;break}return _this.metaAction.toast("error","\u8bf7\u9009\u4e2d\u8981\u5220\u9664\u7684\u679a\u4e3e\u9879"),_context9.abrupt("return");case 8:if(selectRows=lst.filter(function(o){return o.get("selected")}),selectRows&&0!=selectRows.size){_context9.next=12;break}return _this.metaAction.toast("error","\u8bf7\u9009\u4e2d\u8981\u5220\u9664\u7684\u679a\u4e3e\u9879"),_context9.abrupt("return");case 12:return _context9.next=14,_this.metaAction.modal("confirm",{"title":"\u5220\u9664","content":"\u786e\u8ba4\u5220\u9664?"});case 14:if(ret=_context9.sent){_context9.next=17;break}return _context9.abrupt("return");case 17:return ids=selectRows.map(function(o){return o.get("id")}).toJS(),_context9.next=20,_this.webapi.enumDetail.delDetail({"ids":ids,"enumId":type});case 20:_this.metaAction.toast("success","\u5220\u9664\u6210\u529f"),typeList=[],typeList.push(type),_this.selectType(typeList);case 24:case"end":return _context9.stop()}},_callee9,_this)})),this.columnSetting=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee10(){var ret;return _regenerator2["default"].wrap(function _callee10$(_context10){for(;;)switch(_context10.prev=_context10.next){case 0:return _context10.next=2,_this.metaAction.modal("show",{"title":"\u680f\u76ee\u8bbe\u7f6e","children":_this.metaAction.loadApp("ttk-edf-app-column-setting",{"store":_this.component.props.store,"columnCode":"enumList"})});case 2:ret=_context10.sent,ret&&_this.reload();case 4:case"end":return _context10.stop()}},_callee10,_this)})),this.metaAction=option.metaAction,this.config=_config2["default"].current,this.webapi=this.config.webapi};module.exports=exports["default"]},"1678":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{"value":!0}),exports["default"]=void 0;var _dec,_class,_extends2=__webpack_require__(2),_extends3=_interopRequireDefault(_extends2),_classCallCheck2=__webpack_require__(3),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_possibleConstructorReturn2=__webpack_require__(7),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=__webpack_require__(6),_inherits3=_interopRequireDefault(_inherits2),_react=__webpack_require__(1),_edfMetaEngine=(_interopRequireDefault(_react),__webpack_require__(5)),_index=__webpack_require__(699),_index2=_interopRequireDefault(_index),C=(_dec=(0,_edfMetaEngine.wrapper)(_index2["default"]),_dec(_class=function(_Component){function C(){return(0,_classCallCheck3["default"])(this,C),(0,_possibleConstructorReturn3["default"])(this,_Component.apply(this,arguments))}return(0,_inherits3["default"])(C,_Component),C.prototype.render=function render(){return this.props.monkeyKing((0,_extends3["default"])({},this.props,{"path":"root"}))},C}(_react.Component))||_class);exports["default"]=C,module.exports=exports["default"]},"1679":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function creator(option){var metaReducer=new _edfMetaEngine.reducer(option),o=new reducer((0,_extends3["default"])({},option,{"metaReducer":metaReducer}));return(0,_extends3["default"])({},metaReducer,o)}Object.defineProperty(exports,"__esModule",{"value":!0});var _extends2=__webpack_require__(2),_extends3=_interopRequireDefault(_extends2),_classCallCheck2=__webpack_require__(3),_classCallCheck3=_interopRequireDefault(_classCallCheck2);exports["default"]=creator;var _immutable=__webpack_require__(11),_edfMetaEngine=(__webpack_require__(12),__webpack_require__(5)),_config=__webpack_require__(412),_data=(_interopRequireDefault(_config),__webpack_require__(698)),reducer=function reducer(option){var _this=this;(0,_classCallCheck3["default"])(this,reducer),this.init=function(state,option){return _this.metaReducer.init(state,(0,_data.getInitState)())},this.load=function(state,response){return state=_this.metaReducer.sf(state,"data.columns",(0,_immutable.fromJS)(response.columns)),state=_this.metaReducer.sf(state,"data.list",(0,_immutable.fromJS)(response.list)),state=_this.metaReducer.sf(state,"data.pagination",(0,_immutable.fromJS)(response.pagination)),state=_this.metaReducer.sf(state,"data.other.filter",(0,_immutable.fromJS)(response.filter)),response.tree&&(state=_this.metaReducer.sf(state,"data.tree",(0,_immutable.fromJS)(response.tree))),state},this.selectType=function(state,response){return state=_this.metaReducer.sf(state,"data.list",(0,_immutable.fromJS)(response.list)),state=_this.metaReducer.sf(state,"data.pagination",(0,_immutable.fromJS)(response.page)),state=_this.metaReducer.sf(state,"data.other.filter",(0,_immutable.fromJS)(response.filter))},this.selectAll=function(state,checked){var lst=_this.metaReducer.gf(state,"data.list");if(!lst||0==lst.size)return state;for(var i=0;i<lst.size;i++)state=_this.metaReducer.sf(state,"data.list."+i+".selected",checked);return state},this.selectRow=function(state,rowIndex,checked){return state=_this.metaReducer.sf(state,"data.list."+rowIndex+".selected",checked)},this.metaReducer=option.metaReducer};module.exports=exports["default"]},"1680":function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{"value":!0});var _edfUtils=__webpack_require__(12);exports["default"]={"enum":{"query":function query(option){return _edfUtils.fetch.post("/v1/edf/enum/query",option)},"del":function del(option){return _edfUtils.fetch.post("/v1/edf/enum/delete",option)}},"enumDetail":{"init":function init(option){return _edfUtils.fetch.post("/v1/edf/enumDetail/init",option)},"delDetail":function delDetail(option){return _edfUtils.fetch.post("/v1/edf/enumDetail/batchDelete",option)}},"columnDetail":{"findByColumnCode":function findByColumnCode(code){return _edfUtils.fetch.post("/v1/edf/columnDetail/findByColumnCode",code)}}},module.exports=exports["default"]}});