webpackJsonp([23,58],{"440":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function config(options){options&&(0,_extends3["default"])(_options,options)}Object.defineProperty(exports,"__esModule",{"value":!0});var _extends2=__webpack_require__(2),_extends3=_interopRequireDefault(_extends2),_webapi=__webpack_require__(1795),_webapi2=_interopRequireDefault(_webapi),_options={"webapi":_webapi2["default"]};config.current=_options,exports["default"]=config,module.exports=exports["default"]},"753":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function getMeta(){return{"name":"root","component":"Layout","className":"ttk-edf-app-voucher-detail-setting","children":[{"name":"form","component":"Form","className":"ttk-edf-app-voucher-detail-setting-form","children":[{"name":"nameItem","component":"Form.Item","label":"\u5b57\u6bb5\u540d\u79f0","_visible":'{{!(data.other.target != "tbodys")}}',"required":!0,"validateStatus":"{{data.other.error.name?'error':'success'}}","help":"{{data.other.error.name}}","children":[{"name":"name","component":"Input","value":"{{data.form.name}}","onChange":"{{function(e){$fieldChange('data.form.name',e.target.value)}}}"}]},{"name":"fieldNameItem","component":"Form.Item","label":"\u5b57\u6bb5\u540d\u79f0","_visible":'{{data.other.target != "tbodys"}}',"required":!0,"validateStatus":"{{data.other.error.fieldName?'error':'success'}}","help":"{{data.other.error.fieldName}}","children":[{"name":"fieldName","component":"Input","value":"{{data.form.fieldName}}","onChange":"{{function(e){$fieldChange('data.form.fieldName',e.target.value)}}}"}]},{"name":"captionItem","component":"Form.Item","label":"\u5b57\u6bb5\u6807\u9898","required":!0,"validateStatus":"{{data.other.error.caption?'error':'success'}}","help":"{{data.other.error.caption}}","children":[{"name":"caption","component":"Input","value":"{{data.form.caption}}","onChange":"{{function(e){$fieldChange('data.form.caption',e.target.value)}}}"}]},{"name":"colIndexItem","component":"Form.Item","label":"\u663e\u793a\u987a\u5e8f","required":!0,"children":[{"name":"colIndex","component":"Input.Number","value":"{{data.form.colIndex}}","onChange":"{{function(v){$fieldChange('data.form.colIndex',v)}}}"}]},{"name":"isVisibleItem","component":"Form.Item","label":"\u662f\u5426\u663e\u793a","children":[{"name":"isVisible","component":"Checkbox","checked":"{{data.form.isVisible}}","onChange":"{{function(e){$fieldChange('data.form.isVisible', e.target.checked)}}}"}]},{"name":"isMustSelectItem","component":"Form.Item","label":"\u662f\u5426\u5fc5\u9009","_visible":'{{data.other.target != "tbodys"}}',"children":[{"name":"isMustSelect","component":"Checkbox","checked":"{{data.form.isMustSelect}}","onChange":"{{function(e){$fieldChange('data.form.isMustSelect', e.target.checked)}}}"}]},{"name":"isSystemItem","component":"Form.Item","label":"\u662f\u5426\u7cfb\u7edf\u5b57\u6bb5","_visible":'{{data.other.target != "tbodys"}}',"children":[{"name":"isSystem","component":"Checkbox","checked":"{{data.form.isSystem}}","onChange":"{{function(e){$fieldChange('data.form.isSystem', e.target.checked)}}}"}]}]}]}}function getInitState(){var state={"data":{"form":{"code":"","name":"","voucherTableId":!1},"other":{"target":"","error":{}}}};return state}Object.defineProperty(exports,"__esModule",{"value":!0}),exports.getMeta=getMeta,exports.getInitState=getInitState;var _moment=__webpack_require__(14);_interopRequireDefault(_moment)},"1792":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function creator(option){var metaAction=new _edfMetaEngine.action(option),o=new action((0,_extends3["default"])({},option,{"metaAction":metaAction})),ret=(0,_extends3["default"])({},metaAction,o);return metaAction.config({"metaHandlers":ret}),ret}Object.defineProperty(exports,"__esModule",{"value":!0});var _extends2=__webpack_require__(2),_extends3=_interopRequireDefault(_extends2),_getIterator2=__webpack_require__(28),_getIterator3=_interopRequireDefault(_getIterator2),_regenerator=__webpack_require__(20),_regenerator2=_interopRequireDefault(_regenerator),_asyncToGenerator2=__webpack_require__(19),_asyncToGenerator3=_interopRequireDefault(_asyncToGenerator2),_classCallCheck2=__webpack_require__(3),_classCallCheck3=_interopRequireDefault(_classCallCheck2);exports["default"]=creator;var _react=__webpack_require__(1),_edfMetaEngine=(_interopRequireDefault(_react),__webpack_require__(5)),_moment=(__webpack_require__(11),__webpack_require__(14)),_config=(_interopRequireDefault(_moment),__webpack_require__(440)),_config2=_interopRequireDefault(_config),action=function action(option){var _this=this;(0,_classCallCheck3["default"])(this,action),this.onInit=function(_ref){var component=_ref.component,injections=_ref.injections;_this.component=component,_this.injections=injections,injections.reduce("init"),_this.component.props.setOkListener&&_this.component.props.setOkListener(_this.onOk),_this.metaAction.sf("data.other.type",_this.component.props.actionType),_this.metaAction.sf("data.other.target",_this.component.props.target),_this.metaAction.sf("data.form.voucherId",_this.component.props.voucherId),_this.component.props.voucherTableId&&_this.metaAction.sf("data.form.voucherTableId",_this.component.props.voucherTableId),"modify"==_this.component.props.actionType},this.onOk=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee(){return _regenerator2["default"].wrap(function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,_this.save();case 2:return _context.abrupt("return",_context.sent);case 3:case"end":return _context.stop()}},_callee,_this)})),this.save=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee2(){var type,target,voucherId,voucherTableId,form,params,response,_response;return _regenerator2["default"].wrap(function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(type=_this.metaAction.gf("data.other.type"),target=_this.metaAction.gf("data.other.target"),voucherId=_this.metaAction.gf("data.form.voucherId"),voucherTableId=_this.metaAction.gf("data.other.voucherTableId"),form=_this.metaAction.gf("data.form").toJS(),params={},params.voucherId=form.voucherId,params.caption=form.caption,params.colIndex=form.colIndex,params.isVisible=1==form.isVisible?1:0,"add"!=type){_context2.next=40;break}if(response=null,"thead"!=target){_context2.next=21;break}return params.fieldName=form.fieldName,params.isMustSelect=1==form.isMustSelect?1:0,params.isSystem==form.isSystem==1?1:0,_context2.next=18,_this.webapi.voucher.addThead(params);case 18:response=_context2.sent,_context2.next=36;break;case 21:if("tbodys"!=target){_context2.next=28;break}return params.name=form.name,_context2.next=25,_this.webapi.voucher.addTbodys(params);case 25:response=_context2.sent,_context2.next=36;break;case 28:if("tbody"!=target){_context2.next=36;break}return params.voucherTableId=form.voucherTableId,params.fieldName=form.fieldName,params.isMustSelect=1==form.isMustSelect?1:0,params.isSystem==form.isSystem==1?1:0,_context2.next=35,_this.webapi.voucher.addTbody(params);case 35:response=_context2.sent;case 36:return _this.metaAction.toast("success","\u65b0\u589e\u6210\u529f"),_context2.abrupt("return",response);case 40:if("modify"!=type){_context2.next=44;break}return _context2.next=43,_this.webapi.voucher.create(form);case 43:_response=_context2.sent;case 44:case"end":return _context2.stop()}},_callee2,_this)})),this.fieldChange=function(){var _ref4=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee3(fieldPath,value){return _regenerator2["default"].wrap(function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,_this.check([{"path":fieldPath,"value":value}]);case 2:case"end":return _context3.stop()}},_callee3,_this)}));return function(_x,_x2){return _ref4.apply(this,arguments)}}(),this.check=function(){var _ref5=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee4(fieldPathAndValues){var checkResults,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,o,r,json,hasError;return _regenerator2["default"].wrap(function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(fieldPathAndValues){_context4.next=2;break}return _context4.abrupt("return");case 2:checkResults=[],_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0,_context4.prev=6,_iterator=(0,_getIterator3["default"])(fieldPathAndValues);case 8:if(_iteratorNormalCompletion=(_step=_iterator.next()).done){_context4.next=31;break}if(o=_step.value,r=(0,_extends3["default"])({},o),"data.form.name"!=o.path){_context4.next=20;break}return _context4.t0=_extends3["default"],_context4.t1=r,_context4.next=16,_this.checkName(o.value);case 16:_context4.t2=_context4.sent,(0,_context4.t0)(_context4.t1,_context4.t2),_context4.next=27;break;case 20:if("data.form.code"!=o.path){_context4.next=27;break}return _context4.t3=_extends3["default"],_context4.t4=r,_context4.next=25,_this.checkCode(o.value);case 25:_context4.t5=_context4.sent,(0,_context4.t3)(_context4.t4,_context4.t5);case 27:checkResults.push(r);case 28:_iteratorNormalCompletion=!0,_context4.next=8;break;case 31:_context4.next=37;break;case 33:_context4.prev=33,_context4.t6=_context4["catch"](6),_didIteratorError=!0,_iteratorError=_context4.t6;case 37:_context4.prev=37,_context4.prev=38,!_iteratorNormalCompletion&&_iterator["return"]&&_iterator["return"]();case 40:if(_context4.prev=40,!_didIteratorError){_context4.next=43;break}throw _iteratorError;case 43:return _context4.finish(40);case 44:return _context4.finish(37);case 45:return json={},hasError=!0,checkResults.forEach(function(o){json[o.path]=o.value,json[o.errorPath]=o.message,o.message&&(hasError=!1)}),_this.metaAction.sfs(json),_context4.abrupt("return",hasError);case 50:case"end":return _context4.stop()}},_callee4,_this,[[6,33,37,45],[38,,40,44]])}));return function(_x3){return _ref5.apply(this,arguments)}}(),this.checkCode=function(){var _ref6=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee5(code){var message;return _regenerator2["default"].wrap(function _callee5$(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return code||(message="\u8bf7\u5f55\u5165\u680f\u76ee\u7f16\u7801"),_context5.abrupt("return",{"errorPath":"data.other.error.code","message":message});case 2:case"end":return _context5.stop()}},_callee5,_this)}));return function(_x4){return _ref6.apply(this,arguments)}}(),this.checkName=function(){var _ref7=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee6(name){var message;return _regenerator2["default"].wrap(function _callee6$(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:return name||(message="\u8bf7\u5f55\u5165\u680f\u76ee\u540d\u79f0"),_context6.abrupt("return",{"errorPath":"data.other.error.name","message":message});case 2:case"end":return _context6.stop()}},_callee6,_this)}));return function(_x5){return _ref7.apply(this,arguments)}}(),this.metaAction=option.metaAction,this.config=_config2["default"].current,this.webapi=this.config.webapi};module.exports=exports["default"]},"1793":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{"value":!0}),exports["default"]=void 0;var _dec,_class,_extends2=__webpack_require__(2),_extends3=_interopRequireDefault(_extends2),_classCallCheck2=__webpack_require__(3),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_possibleConstructorReturn2=__webpack_require__(7),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=__webpack_require__(6),_inherits3=_interopRequireDefault(_inherits2),_react=__webpack_require__(1),_edfMetaEngine=(_interopRequireDefault(_react),__webpack_require__(5)),_index=__webpack_require__(754),_index2=_interopRequireDefault(_index),C=(_dec=(0,_edfMetaEngine.wrapper)(_index2["default"]),_dec(_class=function(_Component){function C(){return(0,_classCallCheck3["default"])(this,C),(0,_possibleConstructorReturn3["default"])(this,_Component.apply(this,arguments))}return(0,_inherits3["default"])(C,_Component),C.prototype.render=function render(){return this.props.monkeyKing((0,_extends3["default"])({},this.props,{"path":"root"}))},C}(_react.Component))||_class);exports["default"]=C,module.exports=exports["default"]},"1794":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function creator(option){var metaReducer=new _edfMetaEngine.reducer(option),o=new reducer((0,_extends3["default"])({},option,{"metaReducer":metaReducer}));return(0,_extends3["default"])({},metaReducer,o)}Object.defineProperty(exports,"__esModule",{"value":!0});var _extends2=__webpack_require__(2),_extends3=_interopRequireDefault(_extends2),_classCallCheck2=__webpack_require__(3),_classCallCheck3=_interopRequireDefault(_classCallCheck2);exports["default"]=creator;var _immutable=__webpack_require__(11),_edfMetaEngine=__webpack_require__(5),_config=__webpack_require__(440),_moment=(_interopRequireDefault(_config),__webpack_require__(14)),_data=(_interopRequireDefault(_moment),__webpack_require__(753)),reducer=function reducer(option){var _this=this;(0,_classCallCheck3["default"])(this,reducer),this.init=function(state){var initState=(0,_data.getInitState)();return _this.metaReducer.init(state,initState)},this.load=function(state,response){return _this.metaReducer.sf(state,"data.form",(0,_immutable.fromJS)(response))},this.metaReducer=option.metaReducer};module.exports=exports["default"]},"1795":function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{"value":!0});var _edfUtils=__webpack_require__(12);exports["default"]={"voucher":{"addThead":function addThead(option){return _edfUtils.fetch.post("/v1/edf/voucherCardPreset/create",option)},"addTbodys":function addTbodys(option){return _edfUtils.fetch.post("/v1/edf/voucherTablePreset/create",option)},"addTbody":function addTbody(option){return _edfUtils.fetch.post("/v1/edf/voucherDetailPreset/create",option)}}},module.exports=exports["default"]}});