webpackJsonp([15,60],{"447":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function config(options){options&&(0,_extends3["default"])(_options,options)}Object.defineProperty(exports,"__esModule",{"value":!0});var _extends2=__webpack_require__(2),_extends3=_interopRequireDefault(_extends2),_webapi=__webpack_require__(1829),_webapi2=_interopRequireDefault(_webapi),_options={"webapi":_webapi2["default"]};config.current=_options,exports["default"]=config,module.exports=exports["default"]},"448":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function getMeta(){var _ref;return{"name":"root","component":"Layout","className":"ttk-tax-app-select","children":[(_ref={"name":"content","className":"ttk-tax-app-select-content"},(0,_defineProperty3["default"])(_ref,"name","voucherItems"),(0,_defineProperty3["default"])(_ref,"component","Table"),(0,_defineProperty3["default"])(_ref,"pagination",!1),(0,_defineProperty3["default"])(_ref,"id","balanceSheetRptId"),(0,_defineProperty3["default"])(_ref,"allowColResize",!1),(0,_defineProperty3["default"])(_ref,"enableSequenceColumn",!1),(0,_defineProperty3["default"])(_ref,"bordered",!0),(0,_defineProperty3["default"])(_ref,"scroll",{"y":222}),(0,_defineProperty3["default"])(_ref,"dataSource","{{data.info}}"),(0,_defineProperty3["default"])(_ref,"noDelCheckbox",!0),(0,_defineProperty3["default"])(_ref,"columns",[{"title":"\u5e8f\u53f7","dataIndex":"id","key":"id","align":"center","width":46},{"title":"\u8868\u5355","dataIndex":"name","key":"name","width":550,"render":"{{function(text, record, index){return $NameCol(text, record, index)}}}"},{"title":"\u9009\u62e9","key":"operator","align":"center","className":"table_fixed_width","width":44,"render":"{{function(record, index, v){return $optCol(record, index, v)}}}"}]),_ref)]}}function getInitState(){return{"data":{"tableOption":{"x":900},"info":[],"other":{"loading":!1,"isOk":!0}}}}Object.defineProperty(exports,"__esModule",{"value":!0});var _defineProperty2=__webpack_require__(9),_defineProperty3=_interopRequireDefault(_defineProperty2);exports.getMeta=getMeta,exports.getInitState=getInitState},"1825":function(module,exports,__webpack_require__){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj["default"]=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function creator(option){var metaAction=new _edfMetaEngine.action(option),extendAction=_extend2["default"].actionCreator((0,_extends3["default"])({},option,{"metaAction":metaAction})),o=new action((0,_extends3["default"])({},option,{"metaAction":metaAction,"extendAction":extendAction})),ret=(0,_extends3["default"])({},metaAction,extendAction.gridAction,o);return metaAction.config({"metaHandlers":ret}),ret}Object.defineProperty(exports,"__esModule",{"value":!0});var _extends2=__webpack_require__(2),_extends3=_interopRequireDefault(_extends2),_regenerator=__webpack_require__(19),_regenerator2=_interopRequireDefault(_regenerator),_asyncToGenerator2=__webpack_require__(18),_asyncToGenerator3=_interopRequireDefault(_asyncToGenerator2),_classCallCheck2=__webpack_require__(3),_classCallCheck3=_interopRequireDefault(_classCallCheck2);exports["default"]=creator;var _react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_edfMetaEngine=(__webpack_require__(11),__webpack_require__(5)),_edfComponent=__webpack_require__(22),_extend=__webpack_require__(1827),_extend2=_interopRequireDefault(_extend),_config=__webpack_require__(447),_config2=_interopRequireDefault(_config),_moment=__webpack_require__(14),_data3=(_interopRequireDefault(_moment),__webpack_require__(448)),_lodash=(_interopRequireWildcard(_data3),__webpack_require__(12),__webpack_require__(62)),selectMap=(_interopRequireDefault(_lodash),{"generalvattaxpayer":{"zzssyyybnsrzb":{"isSelected":!0},"zzssyyybnsr01bqxsqkmxb":{"isSelected":!0},"zzssyyybnsr02bqjxsemxb":{"isSelected":!0},"zzssyyybnsr03ysfwkcxmmx":{"isSelected":!1},"zzssyyybnsr04bqjxsemxb":{"isSelected":!0},"zzssyyybnsr05bdcfqdkjsb":{"isSelected":!1},"zzsjmssbmxb":{},"zzssyyybnsrygzsffxcsmxb":{}}}),action=function(){function action(option){var _this=this;(0,_classCallCheck3["default"])(this,action),this.onInit=function(_ref){var component=_ref.component,injections=_ref.injections;_this.component=component,_this.injections=injections,injections.reduce("init");var addEventListener=_this.component.props.addEventListener,initData=_this.component.props.initData;addEventListener&&addEventListener("onTabFocus",_this.onTabFocus.bind(_this)),_this.component.props.setOkListener&&_this.component.props.setOkListener(_this.onOk),_this.component.props.setCancelLister&&_this.component.props.setCancelLister(_this.onCancel),_this.load(initData)},this.load=function(){var _ref2=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee(initData){var res;return _regenerator2["default"].wrap(function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(res=void 0,!_this.getIsNewType(initData.selecTableType)){_context.next=10;break}return _context.next=4,_this.webapi.tax.init({"ss":initData.ss,"yzpzzldm":initData.yzpzzldm,"skssqq":initData.skssqq,"skssqz":initData.skssqz});case 4:res=_context.sent,res.fromName=initData.fromName,res.qtxx=initData.qtxx,res=_this.setSelectProps(res,!0),_context.next=13;break;case 10:return _context.next=12,_this.webapi.tax.queryReport({"appraisalId":initData.appraisalId});case 12:res=_context.sent;case 13:res&&_this.injections.reduce("load",res,initData);case 14:case"end":return _context.stop()}},_callee,_this)}));return function(_x){return _ref2.apply(this,arguments)}}(),this.optCol=function(record,text,rowIndex){var disable=void 0;return disable=!_this.getIsNewType()||(_this.component.props.initData.disabled||1==record.required||record.disabled),_react2["default"].createElement(_edfComponent.Checkbox,{"checked":record.isSelected,"onClick":function onClick(){return _this.updateDeclareItem(record,rowIndex)},"disabled":disable})},this.NameCol=function(text,record,rowIndex){return record.bstj?_react2["default"].createElement(_edfComponent.Popover,{"content":_react2["default"].createElement("p",{"className":"c2-title"},record.bstj),"placement":"bottom","overlayClassName":"ttk-tax-app-generalvattaxpayer-popover"},_react2["default"].createElement("p",{"className":"c2-text"},text)):_react2["default"].createElement("p",{"className":"c2-text"},text)},this.resetClick=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee2(){var _data,params,saveRes;return _regenerator2["default"].wrap(function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(!_this.component.props.initData.disabled){_context2.next=2;break}return _context2.abrupt("return");case 2:if(!_this.getIsNewType()){_context2.next=11;break}return _data=_this.setSelectProps(),params={"id":_data.id,"ss":_data.ss,"skssqq":_data.skssqq,"skssqz":_data.skssqz,"info":_data.info,"yzpzzldm":_data.yzpzzldm},params.info=params.info.map(function(item){return delete item.disabled,item}),_context2.next=7,_this.webapi.tax.save(params);case 7:saveRes=_context2.sent,saveRes&&(_this.metaAction.toast("success","\u9009\u62e9\u8868\u5355\u91cd\u7f6e\u6210\u529f"),_data=_this.setSelectProps(),_this.injections.reduce("setData",_data)),_context2.next=11;break;case 11:case"end":return _context2.stop()}},_callee2,_this)})),this.initTableData=function(newlist,oldlist){var reload=!1;newlist.map(function(item,index){item.isSelected!=oldlist[index].isSelected&&(reload=!0)}),reload&&_this.component.props.initData.initialization(_this.component.props.initData.params,!0)},this.updateDeclareItem=function(){var _ref4=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee3(record,rowIndex){return _regenerator2["default"].wrap(function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:_this.metaAction.sf("data.info."+rowIndex+".isSelected",!record.isSelected);case 1:case"end":return _context3.stop()}},_callee3,_this)}));return function(_x2,_x3){return _ref4.apply(this,arguments)}}(),this.onOk=function(){var _ref5=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee4(name){var _data2,params,saveRes;return _regenerator2["default"].wrap(function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _this.metaAction.toast("success","\u9009\u62e9\u8868\u5355\u4fdd\u5b58\u6210\u529f"),_context4.abrupt("return",!0);case 4:if(!_this.getIsNewType()){_context4.next=16;break}return _data2=_this.metaAction.gf("data").toJS(),params={"id":_data2.id,"ss":_data2.ss,"skssqq":_data2.skssqq,"skssqz":_data2.skssqz,"info":_data2.info,"yzpzzldm":_data2.yzpzzldm},params.info=params.info.map(function(item){return delete item.disabled,item}),_context4.next=9,_this.webapi.tax.save(params);case 9:if(saveRes=_context4.sent,!saveRes){_context4.next=14;break}return _this.initTableData(_data2.info,_data2.oldInfo),_this.metaAction.toast("success","\u9009\u62e9\u8868\u5355\u4fdd\u5b58\u6210\u529f"),_context4.abrupt("return",!0);case 14:_context4.next=17;break;case 16:return _context4.abrupt("return",!1);case 17:case"end":return _context4.stop()}},_callee4,_this)}));return function(_x4){return _ref5.apply(this,arguments)}}(),this.onCancel=function(){console.log("cancel");var data=_this.metaAction.gf("data").toJS();return _this.initTableData(data.info,data.oldInfo),!0},this.getIsNewType=function(selecTableType){return selecTableType=selecTableType||_this.metaAction.gf("data.selecTableType"),"newtype"==selecTableType},this.setSelectProps=function(repData,OnlySetDisabled){var data=repData||_this.metaAction.gf("data").toJS(),qtxx=data.qtxx,info=data.info,fromName=data.fromName;return qtxx&&(data.info=info.map(function(item){return"generalvattaxpayer"==fromName&&(item=_this.setSelectPropsOfGeneralvattaxpayer(qtxx,item,fromName,OnlySetDisabled)),item})),data},this.metaAction=option.metaAction,this.extendAction=option.extendAction,this.config=_config2["default"].current,this.webapi=this.config.webapi}return action.prototype.setSelectPropsOfGeneralvattaxpayer=function setSelectPropsOfGeneralvattaxpayer(qtxx,item,fromName,OnlySetDisabled){return 1==item.required?item.disabled=!0:item.disabled=!1,"zzssyyybnsr03ysfwkcxmmx"==item.code?"11"==qtxx.ygzNsrzg?item.disabled=!0:item.disabled=!1:"zzssyyybnsrygzsffxcsmxb"==item.code&&("11"==qtxx.ygzNsrzg?item.disabled=!0:"Y"==qtxx.ygzsfqybbBz?item.disabled=!0:"N"==qtxx.ygzsfqybbBz&&"Y"==qtxx.ygzsfqyBz?item.disabled=!1:item.disabled=!1),OnlySetDisabled||("zzsjmssbmxb"==item.code?"Y"==qtxx.fqmsqBz?item.isSelected=!1:item.isSelected=!0:"zzssyyybnsrygzsffxcsmxb"==item.code?"11"==qtxx.ygzNsrzg||("Y"==qtxx.ygzsfqybbBz||"N"==qtxx.ygzsfqybbBz&&"Y"==qtxx.ygzsfqyBz?item.isSelected=!0:item.isSelected=!1):item.isSelected=selectMap[fromName][item.code].isSelected),item},action}();module.exports=exports["default"]},"1826":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{"value":!0}),exports["default"]=void 0;var _dec,_class,_extends2=__webpack_require__(2),_extends3=_interopRequireDefault(_extends2),_classCallCheck2=__webpack_require__(3),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_possibleConstructorReturn2=__webpack_require__(7),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=__webpack_require__(6),_inherits3=_interopRequireDefault(_inherits2),_react=__webpack_require__(1),_edfMetaEngine=(_interopRequireDefault(_react),__webpack_require__(5)),_index=__webpack_require__(767),_index2=_interopRequireDefault(_index),C=(_dec=(0,_edfMetaEngine.wrapper)(_index2["default"]),_dec(_class=function(_Component){function C(){return(0,_classCallCheck3["default"])(this,C),(0,_possibleConstructorReturn3["default"])(this,_Component.apply(this,arguments))}return(0,_inherits3["default"])(C,_Component),C.prototype.render=function render(){return this.props.monkeyKing((0,_extends3["default"])({},this.props,{"path":"root"}))},C}(_react.Component))||_class);exports["default"]=C,module.exports=exports["default"]},"1827":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function getGridOption(){return{"details":{"path":"data.list","cellClassName":"app-archives-list-cell","emptyRow":{},"getColNames":function getColNames(gf){return[]},"cellIsReadonly":function cellIsReadonly(cellPosition,path,gf){return!1}}}}function actionCreator(option){return{"gridAction":new _edfComponent.GridDecorator.action((0,_extends3["default"])({},option,{"gridOption":getGridOption()}))}}function reducerCreator(option){return{"gridReducer":new _edfComponent.GridDecorator.reducer((0,_extends3["default"])({},option,{"gridOption":getGridOption()}))}}Object.defineProperty(exports,"__esModule",{"value":!0});var _extends2=__webpack_require__(2),_extends3=_interopRequireDefault(_extends2),_edfComponent=__webpack_require__(22);exports["default"]={"actionCreator":actionCreator,"reducerCreator":reducerCreator},module.exports=exports["default"]},"1828":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function creator(option){var metaReducer=new _edfMetaEngine.reducer(option),o=new reducer((0,_extends3["default"])({},option,{"metaReducer":metaReducer}));return(0,_extends3["default"])({},metaReducer,o)}Object.defineProperty(exports,"__esModule",{"value":!0});var _extends2=__webpack_require__(2),_extends3=_interopRequireDefault(_extends2),_classCallCheck2=__webpack_require__(3),_classCallCheck3=_interopRequireDefault(_classCallCheck2);exports["default"]=creator;var _immutable=__webpack_require__(11),_edfMetaEngine=__webpack_require__(5),_config=__webpack_require__(447),_config2=_interopRequireDefault(_config),_data=__webpack_require__(448),_moment=__webpack_require__(14),reducer=(_interopRequireDefault(_moment),__webpack_require__(12),function reducer(option){var _this=this;(0,_classCallCheck3["default"])(this,reducer),this.init=function(state,option){var initState=(0,_data.getInitState)();return state=_this.metaReducer.init(state,initState)},this.load=function(state,data,initData){return"newtype"==initData.selecTableType?(data.oldInfo=data.info,state=_this.metaReducer.sf(state,"data",(0,_immutable.fromJS)(data)),initData.qtxx&&(state=_this.metaReducer.sf(state,"data.qtxx",(0,_immutable.fromJS)(initData.qtxx))),state=_this.metaReducer.sf(state,"data.fromName",initData.fromName)):(data.reportList=data.reportList.map(function(item){return"BDA0610606"!=item.projectReportCode&&"BDA0610339"!=item.projectReportCode&&"BDA0610337"!=item.projectReportCode&&"BDA0610338"!=item.projectReportCode&&"BDA0610566"!=item.projectReportCode&&"BDAbdcfqdkjsb"!=item.projectReportCode&&"BDA0610758"!=item.projectReportCode&&"BDAygzsffxcsmxb"!=item.projectReportCode||(item.isSelected=!0),item.name=item.projectReportName,item.id=item.rowNo,item}),state=_this.metaReducer.sf(state,"data.info",(0,_immutable.fromJS)(data.reportList)),state=_this.metaReducer.sf(state,"data.oldInfo",(0,_immutable.fromJS)(data.reportList)),state=_this.metaReducer.sf(state,"data.appraisalId",initData.appraisalId)),state=_this.metaReducer.sf(state,"data.selecTableType",initData.selecTableType)},this.setData=function(state,data){return state=_this.metaReducer.sf(state,"data",(0,_immutable.fromJS)(data))},this.metaReducer=option.metaReducer,this.config=_config2["default"].current});module.exports=exports["default"]},"1829":function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{"value":!0});var _edfUtils=__webpack_require__(12);exports["default"]={"tax":{"init":function init(option){return _edfUtils.fetch.post("/v1/tax/chooseTable/init",option)},"save":function save(option){return _edfUtils.fetch.post("/v1/tax/chooseTable/save",option)},"saveSelectReport":function saveSelectReport(option){return _edfUtils.fetch.post("/v1/tax/sb/appraisal/selectReport",option)},"queryReport":function queryReport(option){return _edfUtils.fetch.post("/v1/tax/sb/appraisal/queryReport",option)}}},module.exports=exports["default"]}});