webpackJsonp([18,58],{"452":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function config(options){options&&(0,_extends3["default"])(_options,options)}Object.defineProperty(exports,"__esModule",{"value":!0});var _extends2=__webpack_require__(2),_extends3=_interopRequireDefault(_extends2),_webapi=__webpack_require__(1839),_webapi2=_interopRequireDefault(_webapi),_options={"webapi":_webapi2["default"]};config.current=_options,exports["default"]=config,module.exports=exports["default"]},"771":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function getMeta(){var _children;return{"name":"root","component":"div","className":"ttk-tax-app-zzsxgmkcxmqd","children":[{"name":"content","className":"ttk-tax-app-zzsxgmkcxmqd-content","component":"div","children":[{"name":"top","className":"ttk-tax-app-zzsxgmkcxmqd-content-top theader","component":"div","children":[{"name":"top","component":"div","children":[{"name":"nsrsbh","component":"div","className":"nsrsbh","children":["\u7eb3\u7a0e\u4eba\u8bc6\u522b\u53f7\uff1a",{"name":"title","component":"span","children":"{{$renderTitle(data.sbbhead.nsrsbh)}}"}]},{"name":"date","component":"div","className":"date","children":'{{"\u7a0e\u6b3e\u6240\u5c5e\u671f\uff1a" +(data.sbbhead.skssqq || "") + " \u81f3 " + (data.sbbhead.skssqz || "")}}'}]},{"name":"top","component":"div","children":[{"name":"nsrsbh","component":"div","className":"nsrsbh","children":'{{"\u4e3b\u7ba1\u7a0e\u52a1\u673a\u5173\u540d\u79f0\uff1a"+ (data.zgswjgmc || "")}}'},{"name":"date","component":"div","className":"date","children":'{{"\u4e3b\u7ba1\u7a0e\u52a1\u673a\u5173\u4ee3\u7801\uff1a"+ (data.zgswjgdm || "")}}'}]},{"name":"bottom","component":"div","children":[{"name":"nsrmc","component":"div","className":"nsrmc","children":'{{"\u7eb3\u7a0e\u4eba\u540d\u79f0\uff08\u516c\u7ae0\uff09\uff1a"+ (data.sbbhead.nsrmc || "")}}'},{"name":"sbrq1","component":"div","className":"sbrq1","children":'{{"\u586b\u8868\u65e5\u671f\uff1a"+(data.sbbhead.sbrq1||"")}}'},{"name":"unit","component":"div","className":"unit","children":"\u91d1\u989d\u5355\u4f4d\uff1a\u5143\u81f3\u89d2\u5206"}]}]},{"name":"table","component":"div","className":"ttk-tax-app-zzsxgmkcxmqd-content-body zzsxgmkcxmqd","children":[{"name":"zzsxgmkcxmqdTable","component":"div","className":"zsxgmkcxmqd-table","children":(_children={"pagination":!1,"className":"ttk-tax-app-zzsxgmkcxmqd-content-table zzsxgmkcxmqd","name":"zzsxgmkcxmqd","component":"Table"},(0,_defineProperty3["default"])(_children,"pagination",!1),(0,_defineProperty3["default"])(_children,"allowColResize",!1),(0,_defineProperty3["default"])(_children,"enableSequenceColumn",!0),(0,_defineProperty3["default"])(_children,"bordered",!0),(0,_defineProperty3["default"])(_children,"dataSource","{{data.zzsxgmkcxmqd}}"),(0,_defineProperty3["default"])(_children,"noCalculate",!0),(0,_defineProperty3["default"])(_children,"columns",[{"title":"\u51ed\u8bc1\u79cd\u7c7b","dataIndex":"pzzl","key":"pzzl","width":128,"align":"center","render":"{{function(text, record, index){return $renderSelect(index, text)} }}"},{"title":"\u5f00\u7968\u65b9\u7eb3\u7a0e\u4eba\u8bc6\u522b\u53f7","dataIndex":"kpfnsrsbh","key":"kpfnsrsbh","align":"right","width":128,"render":"{{ function(text, record, index){return $renderInput('kpfnsrsbh', index, text)} }}"},{"title":"\u5f00\u7968\u65b9\u5355\u4f4d\u540d\u79f0","dataIndex":"kpfdwmc","key":"kpfdwmc","align":"right","width":128,"render":"{{ function(text, record, index){return $renderInput('kpfdwmc', index, text)} }}"},{"title":"\u53d1\u7968\u4ee3\u7801","dataIndex":"fpdm","key":"fpdm","align":"right","width":128,"render":"{{function(text, record, index){return $renderInput('fpdm', index, text)}}}"},{"title":"\u53d1\u7968\u53f7\u7801","dataIndex":"fphm","key":"fphm","align":"right","width":128,"render":"{{ function(text, record, index){return $renderInput('fphm', index, text)} }}"},{"title":"\u670d\u52a1\u9879\u76ee\u540d\u79f0","dataIndex":"fwxmmc","key":"fwxmmc","align":"right","width":128,"render":"{{function(text, record, index){return $renderInput('fwxmmc', index, text)}}}"},{"title":"\u5141\u8bb8\u6263\u9664\u9879\u76ee\u91d1\u989d","dataIndex":"yxkcxmje","key":"yxkcxmje","align":"right","width":128,"render":"{{ function(text, record, index){return $renderNumber('yxkcxmje', index, text)} }}"},{"title":"\u5f00\u7968\u65e5\u671f","dataIndex":"kjrq","key":"kjrq","align":"right","width":128,"render":"{{function(text, record, index){return $renderDate( index, text)}}}"},{"title":"\u64cd\u4f5c","dataIndex":"C08","key":"C08","width":65,"align":"center","render":"{{function(text, record, index){return $renderButton(index)} }}"}]),_children)}]}]}]}}function getInitState(){return{"data":{"sbbhead":{"nsrmc":"","skssqq":"","skssqz":""},"zgswjgdm":"","zgswjgmc":"","isDeclare":!1,"zzsxgmkcxmqd":[{"kjrq":"20180919","yxkcxmje":"20","fwxmmc":"\u6728\u65b9","fphm":"222122332","fpdm":"sadcdsvsadas","kpfdwmc":"\u6c34\u7535\u8d39\u7b2c\u4e09\u65b9","kpfnsrsbh":"\u5e08\u5fb7\u5e08\u98ce\u7684\u6df1V\u4ece","pzzl":"2"},{"kjrq":"--","yxkcxmje":"20","fwxmmc":"--","fphm":"--","fpdm":"--","kpfdwmc":"--","kpfnsrsbh":"--","pzzl":"\u5408\u8ba1"}],"pzzl":[{"value":"1","lable":"\u53d1\u7968"},{"value":"2","lable":"\u8d22\u653f\u7968\u636e"},{"value":"3","lable":"\u5883\u5916\u7b7e\u6536\u5355\u636e"},{"value":"4","lable":"\u5b8c\u7a0e\u51ed\u8bc1"},{"value":"5","lable":"\u5176\u5b83\u51ed\u8bc1"}],"error":[],"other":{"isSetFocus":!0,"zzsxgmkcxmqd":[{"kjrq":"20180919","yxkcxmje":"20","fwxmmc":"\u6728\u65b9","fphm":"222122332","fpdm":"sadcdsvsadas","kpfdwmc":"\u6c34\u7535\u8d39\u7b2c\u4e09\u65b9","kpfnsrsbh":"\u5e08\u5fb7\u5e08\u98ce\u7684\u6df1V\u4ece","pzzl":"2"},{"kjrq":"--","yxkcxmje":"20","fwxmmc":"--","fphm":"--","fpdm":"--","kpfdwmc":"--","kpfnsrsbh":"--","pzzl":"\u5408\u8ba1"}]}}}}Object.defineProperty(exports,"__esModule",{"value":!0});var _defineProperty2=__webpack_require__(9),_defineProperty3=_interopRequireDefault(_defineProperty2);exports.getMeta=getMeta,exports.getInitState=getInitState},"1836":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function creator(option){var metaAction=new _edfMetaEngine.action(option),voucherAction=_edfComponent.FormDecorator.actionCreator((0,_extends3["default"])({},option,{"metaAction":metaAction})),o=new action((0,_extends3["default"])({},option,{"metaAction":metaAction,"voucherAction":voucherAction})),ret=(0,_extends3["default"])({},metaAction,voucherAction,o);return metaAction.config({"metaHandlers":ret}),ret}Object.defineProperty(exports,"__esModule",{"value":!0});var _extends2=__webpack_require__(2),_extends3=_interopRequireDefault(_extends2),_classCallCheck2=__webpack_require__(3),_classCallCheck3=_interopRequireDefault(_classCallCheck2);exports["default"]=creator;var _react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_immutable=__webpack_require__(11),_edfMetaEngine=__webpack_require__(5),_config=__webpack_require__(452),_config2=_interopRequireDefault(_config),_edfUtils=__webpack_require__(12),_edfComponent=__webpack_require__(24),Option=_edfComponent.Select.Option,action=function action(option){var _this=this;(0,_classCallCheck3["default"])(this,action),this.onInit=function(_ref){var component=_ref.component,injections=_ref.injections;_this.component=component,_this.injections=injections,injections.reduce("init",component.props),_this.load(_this.component.props.initData)},this.load=function(initData){var isDeclare=initData.isDeclare,sbbhead=initData.sbbhead,isCanModify=initData.isCanModify,zzsxgmkcxmqd=initData.zzsxgmkcxmqd,checkData=initData.checkData,kcxmqdmx=zzsxgmkcxmqd?zzsxgmkcxmqd.kcxmqdmx:[],zgswjgdm=zzsxgmkcxmqd?zzsxgmkcxmqd.zgswjgdm:"",zgswjgmc=zzsxgmkcxmqd?zzsxgmkcxmqd.zgswjgmc:"";1==kcxmqdmx.length&&kcxmqdmx.splice(0,0,{"kjrq":"","yxkcxmje":"0","fwxmmc":"","fphm":"","fpdm":"","kpfdwmc":"","kpfnsrsbh":"","pzzl":""}),_this.injections.reduce("load",isDeclare,zgswjgdm,zgswjgmc,isCanModify,kcxmqdmx,sbbhead),_this.initMessage(zzsxgmkcxmqd,checkData)},this.initMessage=function(zzsxgmkcxmqd,checkData){var message=Array(zzsxgmkcxmqd.length);checkData&&0!=checkData.length&&checkData.map(function(item){var file=item.target.split("_");message[file[2]]=(0,_extends3["default"])({},message[file[2]]),message[file[2]][file[3]]=item.message}),message=_this.organizeMessage(zzsxgmkcxmqd.kcxmqdmx,message);_this.errorMessage(zzsxgmkcxmqd.kcxmqdmx,message)},this.organizeMessage=function(list,message){for(var item=void 0,i=0;i<list.length-1;i++)item=list[i],item.yxkcxmje-0<0&&(message[i]=(0,_extends3["default"])({},message[i],{"yxkcxmje":[]}),message[i].yxkcxmje.push("\u5141\u8bb8\u6263\u9664\u9879\u76ee\u91d1\u989d\u4e0d\u80fd\u4e3a\u8d1f")),""!=item.kpfnsrsbh&&([15,18,20].indexOf(item.kpfnsrsbh.length)<0||!/^[A-Za-z0-9]+$/.test(item.kpfnsrsbh))&&(message[i]=(0,_extends3["default"])({},message[i],{"kpfnsrsbh":[]}),message[i].kpfnsrsbh=["\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u7eb3\u7a0e\u4eba\u8bc6\u522b\u53f7"]);return message},this.errorMessage=function(list,message){var _metaAction$gf$toJS=_this.metaAction.gf("data").toJS(),error=_metaAction$gf$toJS.error,zzsxgmkcxmqd=_metaAction$gf$toJS.zzsxgmkcxmqd;_metaAction$gf$toJS.select;error=message?message:error,zzsxgmkcxmqd=list?list:zzsxgmkcxmqd;_this.metaAction.sf("data.error",(0,_immutable.fromJS)(error));var count=0;return error.forEach(function(item,index){index<error.length-1&&item&&(count=count++)}),count},this.selfErrorMessageCount=function(list){for(var count=0,item=void 0,i=0;i<list.length-1;i++)item=list[i],item.yxkcxmje-0<0&&count++,""!=item.kpfnsrsbh&&([15,18,20].indexOf(item.kpfnsrsbh.length)<0||!/^[A-Za-z0-9]+$/.test(item.kpfnsrsbh))&&count++;return count},this.componentWillReceiveProps=function(nextProps){var _nextProps$initData=nextProps.initData,isDeclare=_nextProps$initData.isDeclare,sbbhead=_nextProps$initData.sbbhead,isCanModify=_nextProps$initData.isCanModify,zzsxgmkcxmqd=_nextProps$initData.zzsxgmkcxmqd,checkData=_nextProps$initData.checkData,kcxmqdmx=zzsxgmkcxmqd?zzsxgmkcxmqd.kcxmqdmx:[],zgswjgdm=zzsxgmkcxmqd?zzsxgmkcxmqd.zgswjgdm:"",zgswjgmc=zzsxgmkcxmqd?zzsxgmkcxmqd.zgswjgmc:"";(0,_immutable.is)((0,_immutable.fromJS)(_this.component.props.initData),(0,_immutable.fromJS)(nextProps.initData))||(1==kcxmqdmx.length&&kcxmqdmx.splice(0,0,{"kjrq":"","yxkcxmje":"0","fwxmmc":"","fphm":"","fpdm":"","kpfdwmc":"","kpfnsrsbh":"","pzzl":""}),_this.metaAction.sfs({"data.isDeclare":isDeclare,"data.zgswjgdm":zgswjgdm,"data.zgswjgmc":zgswjgmc,"data.isCanModify":isCanModify,"data.zzsxgmkcxmqd":(0,_immutable.fromJS)(kcxmqdmx),"data.other.zzsxgmkcxmqd":(0,_immutable.fromJS)(kcxmqdmx),"data.sbbhead":(0,_immutable.fromJS)(sbbhead)}),_this.initMessage(zzsxgmkcxmqd,checkData))},this.componentWillUnmount=function(){var zzsxgmkcxmqd=document.querySelector(".zzsxgmkcxmqd");window.removeEventListener?zzsxgmkcxmqd.removeEventListener("keydown",_this.keydown,!1):window.detachEvent&&zzsxgmkcxmqd.detachEvent("onkeydown",_this.keydown)},this.componentDidMount=function(){setTimeout(function(){var zzsxgmkcxmqd=document.querySelector(".zzsxgmkcxmqd");window.addEventListener?zzsxgmkcxmqd.addEventListener("keydown",_this.keydown,!1):window.attachEvent&&zzsxgmkcxmqd.attachEvent("onkeydown",_this.keydown)},10)},this.componentDidUpdate=function(){var isSetFocus=_this.metaAction.gf("data.other.isSetFocus");if(isSetFocus){var dom=document.getElementsByClassName("zzsxgmkcxmqd");dom&&setTimeout(function(){var c=$(dom).find(".ant-select-selection")[0];c&&(c.tabIndex=0,c.focus())},0),_this.metaAction.sf("data.other.isSetFocus",!1)}},this.keydown=function(e){if("Enter"===e.key||13==e.keyCode||108==e.keyCode){var body=document.getElementsByClassName("zzsxgmkcxmqd")[0];body&&setTimeout(function(){if(!e.target.className.includes("ant-select-selection")){var selects=document.getElementsByClassName("autoFocus_item"),dom=$(e.target).parents("td").find(".autoFocus_item"),index=$(selects).index(dom);if(index<0&&(index=_this.metaAction.gf("data.autoFocus")),index!=selects.length-1){var c=selects[index+1].children[0];c&&(c.className&&c.className.includes("ant-select")&&(c=$(c).find(".ant-select-selection")[0]),c.tabIndex=0,c.focus(),c.click(),_this.metaAction.sf("data.autoFocus",index+1))}}},0)}},this.add=function(){var disabled=_this.metaAction.gf("data.isDeclare")&&!_this.metaAction.gf("data.isCanModify");if(!disabled){var list=_this.metaAction.gf("data.zzsxgmkcxmqd").toJS(),error=_this.metaAction.gf("data.error").toJS();error.splice(list.length-1,0,void 0),list.splice(list.length-1,0,{"kjrq":"","yxkcxmje":"0","fwxmmc":"","fphm":"","fpdm":"","kpfdwmc":"","kpfnsrsbh":"","pzzl":""}),_this.injections.reduce("changeTable",list,error)}},this.del=function(index){var disabled=_this.metaAction.gf("data.isDeclare")&&!_this.metaAction.gf("data.isCanModify");if(!disabled){var list=_this.metaAction.gf("data.zzsxgmkcxmqd").toJS(),error=_this.metaAction.gf("data.error").toJS();error.splice(index,1);var del=list.splice(index,1),oldSum=list[list.length-1].yxkcxmje;list[list.length-1].yxkcxmje=parseFloat(list[list.length-1].yxkcxmje)-parseFloat(del[0].yxkcxmje);var newSum=list[list.length-1].yxkcxmje;_this.injections.reduce("changeTable",list,error),_this.formatData(newSum,oldSum)}},this.formatData=function(newSum,oldSum){var kcxmqdmx=_this.metaAction.gf("data.zzsxgmkcxmqd").toJS();newSum=void 0!==newSum?newSum:kcxmqdmx[kcxmqdmx.length-1].yxkcxmje,oldSum=void 0!==oldSum?oldSum:_this.metaAction.gf("data.other.zzsxgmkcxmqd").toJS().pop().yxkcxmje;var zgswjgdm=_this.metaAction.gf("data.zgswjgdm"),zgswjgmc=_this.metaAction.gf("data.zgswjgmc"),changeItems=[],notCalc=!0;newSum!=oldSum&&(changeItems.push({"path":"zzsxgmkcxmqd_kcxmqdmx_"+(kcxmqdmx.length-1)+"_yxkcxmje","oldValue":oldSum||0,"newValue":newSum}),notCalc=!1);var changeTable={"kcxmqdmx":kcxmqdmx,"zgswjgdm":zgswjgdm,"zgswjgmc":zgswjgmc},failCount=_this.selfErrorMessageCount(kcxmqdmx),change=_this.component.props.setVOData({"changeTable":changeTable,"changeItems":changeItems,"sumRowIndex":kcxmqdmx.length-1,"failCount":failCount},notCalc);console.log(change)},this.renderTitle=function(title){return title=title?title:"32"==_this.component.props.initData.SS?_react2["default"].createElement("a",{"onClick":_this.changeProtal.bind(_this)},"\u5b8c\u5584\u4f01\u4e1a\u4fe1\u606f"):""},this.changeProtal=function(){_this.component.props.setPortalContent&&_this.component.props.setPortalContent("\u4f01\u4e1a\u4fe1\u606f","edfx-app-org",{"initData":{"activeKey":"2"}})},this.renderButton=function(index){var list=_this.metaAction.gf("data.zzsxgmkcxmqd").toJS(),obj={"children":_react2["default"].createElement("div",null,_react2["default"].createElement(_edfComponent.Icon,{"type":"xinzengkemu","fontFamily":"edficon","title":"\u589e\u52a0","className":"add","onClick":_this.add.bind(_this)}),_react2["default"].createElement(_edfComponent.Icon,{"type":"shanchu","fontFamily":"edficon","title":"\u5220\u9664","className":"del","onClick":_this.del.bind(_this,index)})),"props":{}};return index===list.length-1&&(obj.children="--"),0===index&&(obj.children=_react2["default"].createElement("div",null,_react2["default"].createElement(_edfComponent.Icon,{"type":"xinzengkemu","fontFamily":"edficon","title":"\u589e\u52a0","className":"add","onClick":_this.add.bind(_this)}),_react2["default"].createElement(_edfComponent.Icon,{"type":"shanchu","fontFamily":"edficon","title":"\u5220\u9664","className":"del","disabled":!0}))),obj},this.getDisabled=function(){var isCanModify=_this.metaAction.gf("data.isCanModify"),disabled=void 0,isDeclare=!!_this.metaAction.gf("data.isDeclare");return disabled=!(!isDeclare||isCanModify)},this.renderSelect=function(index,value){var disabled=_this.getDisabled(),message=_this.metaAction.gf("data.error").toJS()[index],tableList=_this.metaAction.gf("data.zzsxgmkcxmqd").toJS(),tableItem=tableList[index];if(index!=tableList.length-1){var list=_this.metaAction.gf("data.pzzl").toJS(),options=list.map(function(d){return _react2["default"].createElement(Option,{"key":d.value},d.lable)});if(value=tableItem.pzzl||"",message&&message.hmc){var content=message.hmc.map(function(p,index){return _react2["default"].createElement("p",{"className":"message-p"},index+1,"\u3001",p)});return _react2["default"].createElement(_edfComponent.Popover,{"content":_react2["default"].createElement("div",{"style":{"maxWidth":"300px"}},content),"getPopupContainer":function getPopupContainer(){return document.querySelector(".ttk-tax-app-vatTaxpayer")},"overlayClassName":"ttk-tax-app-vattaxpayer-popover"},_react2["default"].createElement("div",{"className":"select autoFocus_item"},_react2["default"].createElement(_edfComponent.Select,{"className":"message zzsxgmkcxmqd-select","allowClear":!!value,"dropdownClassName":"tax","showSearch":!0,"value":value,"disabled":disabled,"onChange":_this.selectChange.bind(_this,index),"dropdownStyle":{"width":"245px"},"dropdownMatchSelectWidth":!1},options)))}return _react2["default"].createElement("div",{"className":"select autoFocus_item"},_react2["default"].createElement(_edfComponent.Select,{"value":value,"className":"zzsxgmkcxmqd-select","allowClear":!!value,"dropdownClassName":"tax","disabled":disabled,"showSearch":!0,"onChange":_this.selectChange.bind(_this,index),"dropdownStyle":{"width":"245px"},"dropdownMatchSelectWidth":!1},options))}return _react2["default"].createElement("span",null,value)},this.renderDate=function(index,value){var disabled=_this.getDisabled(),tableList=_this.metaAction.gf("data.zzsxgmkcxmqd").toJS(),message=_this.metaAction.gf("data.error").toJS()[index];if(index!=tableList.length-1){if(message&&message["kjrq"]){var content=message["kjrq"].map(function(p,index){return _react2["default"].createElement("p",{"className":"message-p"},index+1,"\u3001",p)});return _react2["default"].createElement(_edfComponent.Popover,{"content":_react2["default"].createElement("div",{"style":{"maxWidth":"300px"}},content),"getPopupContainer":function getPopupContainer(){return document.querySelector(".ttk-tax-app-vatTaxpayer")},"overlayClassName":"ttk-tax-app-vattaxpayer-popover"},_react2["default"].createElement("div",{"className":"autoFocus_item"},_react2["default"].createElement(_edfComponent.Input,{"className":"bg-check zzsxgmkcxmqd-input","disabled":disabled,"onBlur":function onBlur(e){return _this.handleBlur(e.target.value,"kjrq",index)},"value":value})))}return _react2["default"].createElement("div",{"className":"autoFocus_item"},_react2["default"].createElement(_edfComponent.Input,{"disabled":disabled,"className":"zzsxgmkcxmqd-input","onBlur":function onBlur(e){return _this.handleBlur(e.target.value,"kjrq",index)},"value":value}))}return _this.renderNone()},this.renderNone=function(){return _react2["default"].createElement("span",{"style":{"textAlign":"center","display":"inline-block","width":"100%"}},"- -")},this.renderText=function(name,index,value){var text=_edfUtils.number.format(value[name],2),message=_this.metaAction.gf("data.error").toJS()[index];if(message&&message[name]){var content=message[name].map(function(p,index){return _react2["default"].createElement("p",{"className":"message-p"},index+1,"\u3001",p)});return _react2["default"].createElement(_edfComponent.Popover,{"content":_react2["default"].createElement("div",{"style":{"maxWidth":"300px"}},content),"getPopupContainer":function getPopupContainer(){return document.querySelector(".ttk-tax-app-vatTaxpayer")},"overlayClassName":"ttk-tax-app-vattaxpayer-popover"},_react2["default"].createElement("span",{"className":"error"},text))}return _react2["default"].createElement("span",null,text)},this.renderInput=function(name,index,value){var disabled=_this.getDisabled(),tableList=_this.metaAction.gf("data.zzsxgmkcxmqd").toJS(),message=_this.metaAction.gf("data.error").toJS()[index];if(index!=tableList.length-1){if(message&&message[name]){var content=message[name].map(function(p,index){return _react2["default"].createElement("p",{"className":"message-p"},index+1,"\u3001",p)});return _react2["default"].createElement(_edfComponent.Popover,{"content":_react2["default"].createElement("div",{"style":{"maxWidth":"300px"}},content),"getPopupContainer":function getPopupContainer(){return document.querySelector(".ttk-tax-app-vatTaxpayer")},"overlayClassName":"ttk-tax-app-vattaxpayer-popover"},_react2["default"].createElement("div",{"className":"autoFocus_item"},_react2["default"].createElement(_edfComponent.Input,{"className":"bg-check zzsxgmkcxmqd-input","disabled":disabled,"onBlur":function onBlur(e){return _this.handleBlur(e.target.value,name,index)},"value":value})))}return _react2["default"].createElement("div",{"className":"autoFocus_item"},_react2["default"].createElement(_edfComponent.Input,{"disabled":disabled,"className":"zzsxgmkcxmqd-input","onBlur":function onBlur(e){return _this.handleBlur(e.target.value,name,index)},"value":value}))}if(message&&message[name]){var _content=message[name].map(function(p,index){return _react2["default"].createElement("p",{"className":"message-p"},index+1,"\u3001",p)});return _react2["default"].createElement(_edfComponent.Popover,{"content":_react2["default"].createElement("div",{"style":{"maxWidth":"300px"}},_content),"getPopupContainer":function getPopupContainer(){return document.querySelector(".ttk-tax-app-vatTaxpayer")},"overlayClassName":"ttk-tax-app-vattaxpayer-popover"},_react2["default"].createElement("span",{"className":"error"},value))}return _this.renderNone()},this.renderNumber=function(name,index,value){value=_edfUtils.number.format(value,2);var disabled=_this.getDisabled(),tableList=_this.metaAction.gf("data.zzsxgmkcxmqd").toJS(),message=_this.metaAction.gf("data.error").toJS()[index];if(index!=tableList.length-1){if(message&&message[name]){var content=message[name].map(function(p,index){return _react2["default"].createElement("p",{"className":"message-p"},index+1,"\u3001",p)});return _react2["default"].createElement(_edfComponent.Popover,{"content":_react2["default"].createElement("div",{"style":{"maxWidth":"300px"}},content),"getPopupContainer":function getPopupContainer(){return document.querySelector(".ttk-tax-app-vatTaxpayer")},"overlayClassName":"ttk-tax-app-vattaxpayer-popover"},_react2["default"].createElement("div",{"className":"autoFocus_item"},_react2["default"].createElement(_edfComponent.Input.Number,{"className":"bg-check zzsxgmkcxmqd-input","disabled":disabled,"onBlur":function onBlur(value){return _this.handleBlur(value,name,index)},"value":value,"regex":"^(-?[0-9]+)(?:\\.[0-9]{1,2})?$"})))}return _react2["default"].createElement("div",{"className":"autoFocus_item"},_react2["default"].createElement(_edfComponent.Input.Number,{"disabled":disabled,"className":"zzsxgmkcxmqd-input","onBlur":function onBlur(value){return _this.handleBlur(value,name,index)},"value":value,"regex":"^(-?[0-9]+)(?:\\.[0-9]{1,2})?$"}))}if(message&&message[name]){var _content2=message[name].map(function(p,index){return _react2["default"].createElement("p",{"className":"message-p"},index+1,"\u3001",p)});return _react2["default"].createElement(_edfComponent.Popover,{"content":_react2["default"].createElement("div",{"style":{"maxWidth":"300px"}},_content2),"getPopupContainer":function getPopupContainer(){return document.querySelector(".ttk-tax-app-vatTaxpayer")},"overlayClassName":"ttk-tax-app-vattaxpayer-popover"},_react2["default"].createElement("span",{"className":"error"},value))}return _react2["default"].createElement("span",null,value)},this.handleBlur=function(value,columnName,index){console.log(1111);var list=_this.metaAction.gf("data.zzsxgmkcxmqd").toJS(),oldList=_this.metaAction.gf("data.other.zzsxgmkcxmqd").toJS();if("yxkcxmje"==columnName&&value&&value>99999999999999.98&&(value=99999999999999.98,_this.metaAction.toast("warning","\u4e0d\u80fd\u5927\u4e8e99,999,999,999,999.99")),"yxkcxmje"==columnName&&value&&value<-99999999999999.98&&(value=-99999999999999.98,_this.metaAction.toast("warning","\u4e0d\u80fd\u5c0f\u4e8e-99,999,999,999,999.99")),"yxkcxmje"==columnName&&(value=_edfUtils.number.clearThousPos(value),list[list.length-1].yxkcxmje=(0,_edfUtils.math)(parseFloat(list[list.length-1].yxkcxmje)-parseFloat(oldList[index].yxkcxmje||0)+parseFloat(value),2)),"fpdm"==columnName){var fpdmLen=12;value&&value.length<fpdmLen?value=value.padStart(fpdmLen,"0"):value&&value.length>fpdmLen&&(value=value.substr(-fpdmLen))}if("fphm"==columnName){var fphmLen=8;value&&value.length<fphmLen?value=value.padStart(fphmLen,"0"):value&&value.length>fphmLen&&(value=value.substr(-fphmLen))}list[index][columnName]=value,_this.metaAction.sfs({"data.zzsxgmkcxmqd":(0,_immutable.fromJS)(list)}),_this.formatData(),_this.metaAction.gf("data.autoFocus")&&setTimeout(function(){var selects=document.getElementsByClassName("autoFocus_item"),index=_this.metaAction.gf("data.autoFocus");if(index!=selects.length-1){var c=selects[index].children[0];c&&(c.className&&c.className.includes("ant-select")&&(c=$(c).find(".ant-select-selection")[0]),c.tabIndex=0,c.focus())}},500)},this.selectChange=function(index,value){var list=_this.metaAction.gf("data.zzsxgmkcxmqd").toJS(),error=_this.metaAction.gf("data.error").toJS();value?list[index].pzzl=value:list[index].pzzl="",_this.injections.reduce("changeSelect",list,error),_this.formatData()},this.metaAction=option.metaAction,this.extendAction=option.extendAction,this.config=_config2["default"].current,this.webapi=this.config.webapi,this.voucherAction=option.voucherAction};module.exports=exports["default"]},"1837":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{"value":!0}),exports["default"]=void 0;var _dec,_class,_extends2=__webpack_require__(2),_extends3=_interopRequireDefault(_extends2),_classCallCheck2=__webpack_require__(3),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_possibleConstructorReturn2=__webpack_require__(7),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=__webpack_require__(6),_inherits3=_interopRequireDefault(_inherits2),_react=__webpack_require__(1),_edfMetaEngine=(_interopRequireDefault(_react),__webpack_require__(5)),_index=__webpack_require__(772),_index2=_interopRequireDefault(_index),C=(_dec=(0,_edfMetaEngine.wrapper)(_index2["default"]),_dec(_class=function(_Component){function C(){return(0,_classCallCheck3["default"])(this,C),(0,_possibleConstructorReturn3["default"])(this,_Component.apply(this,arguments))}return(0,_inherits3["default"])(C,_Component),C.prototype.render=function render(){return this.props.monkeyKing((0,_extends3["default"])({},this.props,{"path":"root"}))},C}(_react.Component))||_class);exports["default"]=C,module.exports=exports["default"]},"1838":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function creator(option){var metaReducer=new _edfMetaEngine.reducer(option),o=new reducer((0,_extends3["default"])({},option,{"metaReducer":metaReducer}));return(0,_extends3["default"])({},metaReducer,o)}Object.defineProperty(exports,"__esModule",{"value":!0});var _class,_temp,_initialiseProps,_extends2=__webpack_require__(2),_extends3=_interopRequireDefault(_extends2),_classCallCheck2=__webpack_require__(3),_classCallCheck3=_interopRequireDefault(_classCallCheck2);exports["default"]=creator;var _immutable=__webpack_require__(11),_edfMetaEngine=__webpack_require__(5),_config=__webpack_require__(452),_config2=_interopRequireDefault(_config),_data=__webpack_require__(771),reducer=(_temp=_class=function reducer(option){(0,_classCallCheck3["default"])(this,reducer),_initialiseProps.call(this),this.metaReducer=option.metaReducer,this.config=_config2["default"].current},_initialiseProps=function _initialiseProps(){var _this=this;this.init=function(state,option){var initState=(0,_data.getInitState)();return initState.data.periodData=option.periodData,initState.data.isCanModify=option.initData.isCanModify,_this.metaReducer.init(state,initState)},this.load=function(state,isDeclare,zgswjgdm,zgswjgmc,isCanModify,kcxmqdmx,sbbhead){return 1==kcxmqdmx.length&&kcxmqdmx.splice(0,0,{"kjrq":"","yxkcxmje":"0","fwxmmc":"","fphm":"","fpdm":"","kpfdwmc":"","kpfnsrsbh":"","pzzl":""}),state=_this.metaReducer.sf(state,"data.zzsxgmkcxmqd",(0,_immutable.fromJS)(kcxmqdmx)),state=_this.metaReducer.sf(state,"data.sbbhead",(0,_immutable.fromJS)(sbbhead)),state=_this.metaReducer.sf(state,"data.zgswjgdm",(0,_immutable.fromJS)(zgswjgdm)),state=_this.metaReducer.sf(state,"data.zgswjgmc",(0,_immutable.fromJS)(zgswjgmc)),state=_this.metaReducer.sf(state,"data.isCanModify",(0,_immutable.fromJS)(isCanModify)),state=_this.metaReducer.sf(state,"data.other.zzsxgmkcxmqd",(0,_immutable.fromJS)(kcxmqdmx)),state=_this.metaReducer.sf(state,"data.isDeclare",isDeclare)},this.update=function(state,change,message,zzsxgmkcxmqd){return change&&change.checkData&&change.checkData.map(function(item){var file=item.target.split("_");file[1]==tableName+"Grid"&&(message[0]=(0,_extends3["default"])({},message[0]),message[0][file[4]]=item.message)}),state=_this.metaReducer.sf(state,"data.error",(0,_immutable.fromJS)(message)),state=_this.metaReducer.sf(state,"data.other.zzsxgmkcxmqd",(0,_immutable.fromJS)(zzsxgmkcxmqd))},this.changeTable=function(state,data,error){return state=_this.metaReducer.sf(state,"data.zzsxgmkcxmqd",(0,_immutable.fromJS)(data)),state=_this.metaReducer.sf(state,"data.other.zzsxgmkcxmqd",(0,_immutable.fromJS)(data)),error&&(state=_this.metaReducer.sf(state,"data.error",(0,_immutable.fromJS)(error))),state},this.changeSelect=function(state,list,error){return state=_this.metaReducer.sf(state,"data.zzsxgmkcxmqd",(0,_immutable.fromJS)(list)),state=_this.metaReducer.sf(state,"data.error",(0,_immutable.fromJS)(error))}},_temp);module.exports=exports["default"]},"1839":function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{"value":!0});var _edfUtils=__webpack_require__(12);exports["default"]={"selectInit":function selectInit(option){return _edfUtils.fetch.post("/v1/tax/zzssb/smallVat/queryReduceAndFreeTaxData")}},module.exports=exports["default"]}});